{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://punchcard-work-time-statistics/./src/webview.js","webpack://punchcard-work-time-statistics/./src/tracker.js","webpack://punchcard-work-time-statistics/./src/types.js","webpack://punchcard-work-time-statistics/external commonjs \"vscode\"","webpack://punchcard-work-time-statistics/./src/utils.js","webpack://punchcard-work-time-statistics/./src/extension.js","webpack://punchcard-work-time-statistics/./src/statusBar.js","webpack://punchcard-work-time-statistics/./src/storage.js","webpack://punchcard-work-time-statistics/webpack/bootstrap","webpack://punchcard-work-time-statistics/webpack/startup"],"sourcesContent":["const vscode = require('vscode');\nconst { formatTime, formatTimeHuman, getDailyBreakdown, getWeeklyBreakdown, getMonthlyBreakdown, getTimeInRange, getStartOfDay } = require('./utils');\n\n/**\n * WebView panel for displaying statistics\n */\nclass StatsWebView {\n    /**\n     * @param {vscode.ExtensionContext} context \n     * @param {import('./storage').Storage} storage \n     */\n    constructor(context, storage) {\n        this.context = context;\n        this.storage = storage;\n        this.panel = null;\n    }\n\n    /**\n     * Show the statistics panel\n     */\n    show() {\n        if (this.panel) {\n            this.panel.reveal(vscode.ViewColumn.One);\n            this.update();\n            return;\n        }\n\n        this.panel = vscode.window.createWebviewPanel(\n            'workTimerStats',\n            'PUNCHCARD - Work Time Statistics',\n            vscode.ViewColumn.One,\n            {\n                enableScripts: true,\n                retainContextWhenHidden: true\n            }\n        );\n\n        this.panel.webview.html = this.getWebviewContent();\n\n        this.panel.webview.onDidReceiveMessage(\n            async (message) => {\n                switch (message.command) {\n                    case 'resetProject':\n                        const confirmReset = await vscode.window.showWarningMessage(\n                            `Are you sure you want to reset statistics for \"${message.projectId}\"?`,\n                            { modal: true },\n                            'Yes, Reset'\n                        );\n                        if (confirmReset === 'Yes, Reset') {\n                            await this.storage.resetProject(message.projectId);\n                            this.update();\n                            vscode.window.showInformationMessage(`Statistics for \"${message.projectId}\" have been reset.`);\n                        }\n                        break;\n                    case 'refresh':\n                        this.update();\n                        break;\n                }\n            },\n            undefined,\n            this.context.subscriptions\n        );\n\n        this.panel.onDidDispose(\n            () => {\n                this.panel = null;\n            },\n            null,\n            this.context.subscriptions\n        );\n    }\n\n    /**\n     * Update the webview content\n     */\n    update() {\n        if (this.panel) {\n            this.panel.webview.html = this.getWebviewContent();\n        }\n    }\n\n    /**\n     * Get the HTML content for the webview\n     * @returns {string}\n     */\n    getWebviewContent() {\n        const data = this.storage.getAllData();\n        const summary = this.storage.getSummary();\n        const projects = data.projects;\n\n        // Prepare chart data\n        const allSessions = [];\n        for (const projectId in projects) {\n            allSessions.push(...projects[projectId].sessions);\n        }\n\n        const dailyData = getDailyBreakdown(allSessions, 7);\n        const weeklyData = getWeeklyBreakdown(allSessions, 4);\n        const monthlyData = getMonthlyBreakdown(allSessions, 6);\n\n        // Calculate today's time\n        const startOfDay = getStartOfDay();\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\n        const todayTime = getTimeInRange(allSessions, startOfDay, endOfDay);\n\n        return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>PUNCHCARD - Work Time Statistics</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n        :root {\n            --bg-color: var(--vscode-editor-background);\n            --text-color: var(--vscode-editor-foreground);\n            --border-color: var(--vscode-panel-border);\n            --card-bg: var(--vscode-editorWidget-background);\n            --accent-color: var(--vscode-button-background);\n            --accent-hover: var(--vscode-button-hoverBackground);\n            --danger-color: var(--vscode-errorForeground);\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: var(--vscode-font-family);\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            padding: 20px;\n            line-height: 1.6;\n        }\n\n        h1, h2, h3 {\n            margin-bottom: 15px;\n            font-weight: 600;\n        }\n\n        h1 {\n            font-size: 24px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        h1::before {\n            content: \"‚è±Ô∏è\";\n        }\n\n        .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 30px;\n            padding-bottom: 15px;\n            border-bottom: 1px solid var(--border-color);\n        }\n\n        .refresh-btn {\n            background-color: var(--accent-color);\n            color: var(--vscode-button-foreground);\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n        }\n\n        .refresh-btn:hover {\n            background-color: var(--accent-hover);\n        }\n\n        .summary-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 15px;\n            margin-bottom: 30px;\n        }\n\n        .summary-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            text-align: center;\n        }\n\n        .summary-card .value {\n            font-size: 28px;\n            font-weight: bold;\n            color: var(--accent-color);\n            margin-bottom: 5px;\n        }\n\n        .summary-card .label {\n            font-size: 12px;\n            opacity: 0.8;\n            text-transform: uppercase;\n        }\n\n        .charts-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .chart-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n        }\n\n        .chart-card h3 {\n            margin-bottom: 20px;\n        }\n\n        .chart-container {\n            position: relative;\n            height: 250px;\n        }\n\n        .projects-section {\n            margin-top: 30px;\n        }\n\n        .project-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            margin-bottom: 15px;\n        }\n\n        .project-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 15px;\n        }\n\n        .project-name {\n            font-size: 18px;\n            font-weight: 600;\n        }\n\n        .reset-btn {\n            background-color: transparent;\n            color: var(--danger-color);\n            border: 1px solid var(--danger-color);\n            padding: 5px 10px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 12px;\n        }\n\n        .reset-btn:hover {\n            background-color: var(--danger-color);\n            color: white;\n        }\n\n        .project-stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 10px;\n        }\n\n        .stat {\n            display: flex;\n            flex-direction: column;\n        }\n\n        .stat .stat-value {\n            font-size: 20px;\n            font-weight: bold;\n        }\n\n        .stat .stat-label {\n            font-size: 11px;\n            opacity: 0.7;\n            text-transform: uppercase;\n        }\n\n        .no-data {\n            text-align: center;\n            padding: 40px;\n            opacity: 0.6;\n        }\n\n        @media (max-width: 600px) {\n            .charts-container {\n                grid-template-columns: 1fr;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>PUNCHCARD - Work Time Statistics</h1>\n        <button class=\"refresh-btn\" onclick=\"refresh()\">üîÑ Refresh</button>\n    </div>\n\n    <div class=\"summary-grid\">\n        <div class=\"summary-card\">\n            <div class=\"value\">${formatTime(summary.totalTime)}</div>\n            <div class=\"label\">Total Time</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${formatTime(todayTime)}</div>\n            <div class=\"label\">Today</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${summary.projectCount}</div>\n            <div class=\"label\">Projects</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${summary.totalSessions}</div>\n            <div class=\"label\">Sessions</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${this.formatNumber(summary.totalKeystrokes)}</div>\n            <div class=\"label\">Keystrokes</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">+${this.formatNumber(summary.totalLinesAdded)}</div>\n            <div class=\"label\">Lines Added</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">-${this.formatNumber(summary.totalLinesDeleted)}</div>\n            <div class=\"label\">Lines Deleted</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${this.formatNumber(summary.totalCharsAdded)}</div>\n            <div class=\"label\">Chars Added</div>\n        </div>\n    </div>\n\n    <div class=\"charts-container\">\n        <div class=\"chart-card\">\n            <h3>üìÖ Daily Activity (Last 7 Days)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"dailyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>üìä Weekly Activity (Last 4 Weeks)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"weeklyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>üìà Monthly Activity (Last 6 Months)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"monthlyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>ü•ß Time by Project</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"projectsChart\"></canvas>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"projects-section\">\n        <h2>üìÅ Projects</h2>\n        ${Object.keys(projects).length === 0 ? \n            '<div class=\"no-data\">No projects tracked yet. Start coding to see your statistics!</div>' :\n            Object.entries(projects).map(([projectId, stats]) => `\n                <div class=\"project-card\">\n                    <div class=\"project-header\">\n                        <span class=\"project-name\">${this.escapeHtml(projectId)}</span>\n                        <button class=\"reset-btn\" onclick=\"resetProject('${this.escapeHtml(projectId)}')\">üóëÔ∏è Reset</button>\n                    </div>\n                    <div class=\"project-stats\">\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${formatTime(stats.totalTime)}</span>\n                            <span class=\"stat-label\">Total Time</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${stats.sessions.length}</span>\n                            <span class=\"stat-label\">Sessions</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${this.formatNumber(stats.keystrokes)}</span>\n                            <span class=\"stat-label\">Keystrokes</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">+${this.formatNumber(stats.linesAdded)}</span>\n                            <span class=\"stat-label\">Lines Added</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">-${this.formatNumber(stats.linesDeleted)}</span>\n                            <span class=\"stat-label\">Lines Deleted</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${this.formatNumber(stats.charactersAdded)}</span>\n                            <span class=\"stat-label\">Chars Added</span>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${stats.lastActive ? new Date(stats.lastActive).toLocaleDateString() : 'Never'}</span>\n                            <span class=\"stat-label\">Last Active</span>\n                        </div>\n                    </div>\n                </div>\n            `).join('')\n        }\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n\n        function refresh() {\n            vscode.postMessage({ command: 'refresh' });\n        }\n\n        function resetProject(projectId) {\n            vscode.postMessage({ command: 'resetProject', projectId: projectId });\n        }\n\n        // Chart.js configuration\n        Chart.defaults.color = getComputedStyle(document.body).getPropertyValue('--vscode-editor-foreground') || '#ffffff';\n        Chart.defaults.borderColor = getComputedStyle(document.body).getPropertyValue('--vscode-panel-border') || '#333333';\n\n        const chartColors = [\n            '#4FC3F7', '#81C784', '#FFB74D', '#F06292', '#BA68C8',\n            '#4DD0E1', '#AED581', '#FF8A65', '#9575CD', '#7986CB'\n        ];\n\n        // Daily Chart\n        const dailyData = ${JSON.stringify(dailyData)};\n        new Chart(document.getElementById('dailyChart'), {\n            type: 'bar',\n            data: {\n                labels: dailyData.map(d => d.date),\n                datasets: [{\n                    label: 'Hours',\n                    data: dailyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#4FC3F7',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Weekly Chart\n        const weeklyData = ${JSON.stringify(weeklyData)};\n        new Chart(document.getElementById('weeklyChart'), {\n            type: 'bar',\n            data: {\n                labels: weeklyData.map(d => d.week),\n                datasets: [{\n                    label: 'Hours',\n                    data: weeklyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#81C784',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Monthly Chart\n        const monthlyData = ${JSON.stringify(monthlyData)};\n        new Chart(document.getElementById('monthlyChart'), {\n            type: 'line',\n            data: {\n                labels: monthlyData.map(d => d.month),\n                datasets: [{\n                    label: 'Hours',\n                    data: monthlyData.map(d => (d.time / 3600000).toFixed(2)),\n                    borderColor: '#FFB74D',\n                    backgroundColor: 'rgba(255, 183, 77, 0.2)',\n                    fill: true,\n                    tension: 0.3\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Projects Pie Chart\n        const projectsData = ${JSON.stringify(Object.entries(projects).map(([name, stats]) => ({ name, time: stats.totalTime })))};\n        if (projectsData.length > 0) {\n            new Chart(document.getElementById('projectsChart'), {\n                type: 'doughnut',\n                data: {\n                    labels: projectsData.map(d => d.name),\n                    datasets: [{\n                        data: projectsData.map(d => (d.time / 3600000).toFixed(2)),\n                        backgroundColor: chartColors.slice(0, projectsData.length)\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'right',\n                            labels: {\n                                boxWidth: 12,\n                                padding: 10\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    </script>\n</body>\n</html>`;\n    }\n\n    /**\n     * Format a number with thousands separator\n     * @param {number} num \n     * @returns {string}\n     */\n    formatNumber(num) {\n        return num.toLocaleString();\n    }\n\n    /**\n     * Escape HTML special characters\n     * @param {string} text \n     * @returns {string}\n     */\n    escapeHtml(text) {\n        const div = { \n            '&': '&amp;', \n            '<': '&lt;', \n            '>': '&gt;', \n            '\"': '&quot;', \n            \"'\": '&#039;' \n        };\n        return text.replace(/[&<>\"']/g, (m) => div[m]);\n    }\n\n    /**\n     * Dispose the webview\n     */\n    dispose() {\n        if (this.panel) {\n            this.panel.dispose();\n            this.panel = null;\n        }\n    }\n}\n\nmodule.exports = { StatsWebView };\n","const vscode = require('vscode');\nconst { getProjectId } = require('./utils');\nconst { createEmptyProjectStats } = require('./types');\n\n/**\n * Time tracker for monitoring user activity\n */\nclass Tracker {\n    /**\n     * @param {import('./storage').Storage} storage \n     */\n    constructor(storage) {\n        this.storage = storage;\n        this.projectId = getProjectId();\n        this.isTracking = false;\n        this.lastActivity = Date.now();\n        this.sessionStartTime = 0;\n        this.currentSessionTime = 0;\n        this.isAfk = false;\n        this.afkThreshold = 300000; // 5 minutes default\n        this.checkInterval = null;\n        this.disposables = [];\n        this.onTimeUpdateCallback = null;\n        this.onAfkChangeCallback = null;\n    }\n\n    /**\n     * Initialize the tracker\n     */\n    initialize() {\n        // Load configuration\n        this.loadConfig();\n\n        // Listen for config changes\n        this.disposables.push(\n            vscode.workspace.onDidChangeConfiguration((e) => {\n                if (e.affectsConfiguration('workTimer')) {\n                    this.loadConfig();\n                }\n            })\n        );\n\n        // Check if we should track on startup\n        const config = vscode.workspace.getConfiguration('workTimer');\n        if (config.get('trackOnStartup', true)) {\n            this.start();\n        }\n    }\n\n    /**\n     * Load configuration\n     */\n    loadConfig() {\n        const config = vscode.workspace.getConfiguration('workTimer');\n        this.afkThreshold = config.get('afkThreshold', 300000);\n    }\n\n    /**\n     * Start tracking\n     */\n    start() {\n        if (this.isTracking) {\n            return;\n        }\n\n        this.isTracking = true;\n        this.lastActivity = Date.now();\n        this.sessionStartTime = Date.now();\n        this.currentSessionTime = 0;\n        this.isAfk = false;\n\n        // Register activity listeners\n        this.registerActivityListeners();\n\n        // Start the check interval (every second)\n        this.checkInterval = setInterval(() => this.tick(), 1000);\n\n        // Create a new session\n        this.storage.addSession(this.projectId, {\n            startTime: this.sessionStartTime,\n            endTime: this.sessionStartTime,\n            duration: 0\n        });\n    }\n\n    /**\n     * Stop tracking\n     */\n    stop() {\n        if (!this.isTracking) {\n            return;\n        }\n\n        this.isTracking = false;\n\n        // Clear interval\n        if (this.checkInterval) {\n            clearInterval(this.checkInterval);\n            this.checkInterval = null;\n        }\n\n        // Dispose activity listeners\n        this.disposeActivityListeners();\n\n        // Finalize session\n        if (this.sessionStartTime > 0) {\n            const endTime = Date.now();\n            this.storage.updateLastSession(\n                this.projectId,\n                endTime,\n                this.currentSessionTime\n            );\n        }\n    }\n\n    /**\n     * Register activity event listeners\n     */\n    registerActivityListeners() {\n        // Text document changes (typing)\n        this.disposables.push(\n            vscode.workspace.onDidChangeTextDocument((e) => {\n                this.onActivity();\n                this.trackDocumentChanges(e);\n            })\n        );\n\n        // Cursor movement\n        this.disposables.push(\n            vscode.window.onDidChangeTextEditorSelection(() => {\n                this.onActivity();\n            })\n        );\n\n        // Scrolling\n        this.disposables.push(\n            vscode.window.onDidChangeTextEditorVisibleRanges(() => {\n                this.onActivity();\n            })\n        );\n\n        // File switching\n        this.disposables.push(\n            vscode.window.onDidChangeActiveTextEditor(() => {\n                this.onActivity();\n                // Update project ID in case workspace changed\n                this.projectId = getProjectId();\n            })\n        );\n    }\n\n    /**\n     * Dispose activity listeners\n     */\n    disposeActivityListeners() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n        this.disposables = [];\n    }\n\n    /**\n     * Called when any activity is detected\n     */\n    onActivity() {\n        const wasAfk = this.isAfk;\n        this.lastActivity = Date.now();\n        this.isAfk = false;\n\n        if (wasAfk && this.onAfkChangeCallback) {\n            this.onAfkChangeCallback(false);\n            \n            // Start a new session when coming back from AFK\n            this.sessionStartTime = Date.now();\n            this.currentSessionTime = 0;\n            this.storage.addSession(this.projectId, {\n                startTime: this.sessionStartTime,\n                endTime: this.sessionStartTime,\n                duration: 0\n            });\n        }\n    }\n\n    /**\n     * Track document changes (keystrokes, lines, characters)\n     * @param {vscode.TextDocumentChangeEvent} event \n     */\n    trackDocumentChanges(event) {\n        if (!event.contentChanges.length) {\n            return;\n        }\n\n        let linesAdded = 0;\n        let linesDeleted = 0;\n        let charsAdded = 0;\n        let charsDeleted = 0;\n        let keystrokes = 0;\n\n        for (const change of event.contentChanges) {\n            // Count characters\n            charsAdded += change.text.length;\n            charsDeleted += change.rangeLength;\n\n            // Count lines\n            const newLines = (change.text.match(/\\n/g) || []).length;\n            const deletedLines = change.range.end.line - change.range.start.line;\n\n            linesAdded += newLines;\n            linesDeleted += deletedLines;\n\n            // Count keystrokes (simplified: each change is at least one keystroke)\n            keystrokes += Math.max(1, change.text.length);\n        }\n\n        this.storage.addMetrics(this.projectId, {\n            linesAdded,\n            linesDeleted,\n            charactersAdded: charsAdded,\n            charactersDeleted: charsDeleted,\n            keystrokes\n        });\n    }\n\n    /**\n     * Tick function called every second\n     */\n    tick() {\n        if (!this.isTracking) {\n            return;\n        }\n\n        const now = Date.now();\n        const timeSinceActivity = now - this.lastActivity;\n\n        // Check for AFK\n        if (timeSinceActivity >= this.afkThreshold) {\n            if (!this.isAfk) {\n                this.isAfk = true;\n                \n                // Finalize current session\n                this.storage.updateLastSession(\n                    this.projectId,\n                    this.lastActivity,\n                    this.currentSessionTime\n                );\n\n                if (this.onAfkChangeCallback) {\n                    this.onAfkChangeCallback(true);\n                }\n            }\n            return;\n        }\n\n        // Add time if not AFK\n        if (!this.isAfk) {\n            this.currentSessionTime += 1000;\n            this.storage.addTime(this.projectId, 1000);\n            \n            // Update session\n            this.storage.updateLastSession(\n                this.projectId,\n                now,\n                this.currentSessionTime\n            );\n\n            if (this.onTimeUpdateCallback) {\n                this.onTimeUpdateCallback(this.currentSessionTime);\n            }\n        }\n    }\n\n    /**\n     * Set callback for time updates\n     * @param {(time: number) => void} callback \n     */\n    onTimeUpdate(callback) {\n        this.onTimeUpdateCallback = callback;\n    }\n\n    /**\n     * Set callback for AFK status changes\n     * @param {(isAfk: boolean) => void} callback \n     */\n    onAfkChange(callback) {\n        this.onAfkChangeCallback = callback;\n    }\n\n    /**\n     * Get current session time\n     * @returns {number}\n     */\n    getCurrentSessionTime() {\n        return this.currentSessionTime;\n    }\n\n    /**\n     * Get today's total time for current project\n     * @returns {number}\n     */\n    getTodayTime() {\n        const stats = this.storage.getProjectStats(this.projectId);\n        const startOfDay = new Date();\n        startOfDay.setHours(0, 0, 0, 0);\n        const startTimestamp = startOfDay.getTime();\n        const now = Date.now();\n\n        let todayTime = 0;\n        for (const session of stats.sessions) {\n            if (session.startTime >= startTimestamp) {\n                // Session started today\n                todayTime += session.duration;\n            } else if (session.endTime > startTimestamp) {\n                // Session spans midnight\n                todayTime += session.endTime - startTimestamp;\n            }\n        }\n\n        return todayTime;\n    }\n\n    /**\n     * Check if currently tracking\n     * @returns {boolean}\n     */\n    isCurrentlyTracking() {\n        return this.isTracking && !this.isAfk;\n    }\n\n    /**\n     * Get current project ID\n     * @returns {string}\n     */\n    getProjectId() {\n        return this.projectId;\n    }\n\n    /**\n     * Dispose the tracker\n     */\n    dispose() {\n        this.stop();\n        this.disposeActivityListeners();\n    }\n}\n\nmodule.exports = { Tracker };\n","/**\n * @typedef {Object} ProjectStats\n * @property {number} totalTime - Total active time in milliseconds\n * @property {number} linesAdded - Total lines added\n * @property {number} linesDeleted - Total lines deleted\n * @property {number} charactersAdded - Total characters added\n * @property {number} charactersDeleted - Total characters deleted\n * @property {number} keystrokes - Total keystrokes\n * @property {Session[]} sessions - Array of work sessions\n * @property {number} lastActive - Last active timestamp\n */\n\n/**\n * @typedef {Object} Session\n * @property {number} startTime - Session start timestamp\n * @property {number} endTime - Session end timestamp\n * @property {number} duration - Session duration in milliseconds\n */\n\n/**\n * @typedef {Object} StorageData\n * @property {Object.<string, ProjectStats>} projects - Map of project paths to stats\n * @property {number} totalTimeAllProjects - Total time across all projects\n * @property {number} totalKeystrokes - Total keystrokes across all projects\n */\n\n/**\n * Creates a new empty ProjectStats object\n * @returns {ProjectStats}\n */\nfunction createEmptyProjectStats() {\n    return {\n        totalTime: 0,\n        linesAdded: 0,\n        linesDeleted: 0,\n        charactersAdded: 0,\n        charactersDeleted: 0,\n        keystrokes: 0,\n        sessions: [],\n        lastActive: 0\n    };\n}\n\n/**\n * Creates a new empty StorageData object\n * @returns {StorageData}\n */\nfunction createEmptyStorageData() {\n    return {\n        projects: {},\n        totalTimeAllProjects: 0,\n        totalKeystrokes: 0\n    };\n}\n\nmodule.exports = {\n    createEmptyProjectStats,\n    createEmptyStorageData\n};\n","module.exports = require(\"vscode\");","const vscode = require('vscode');\n\n/**\n * Format milliseconds to HH:MM:SS string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Formatted time string\n */\nfunction formatTime(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format milliseconds to human readable string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Human readable time string\n */\nfunction formatTimeHuman(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    const parts = [];\n    if (hours > 0) parts.push(`${hours}h`);\n    if (minutes > 0) parts.push(`${minutes}m`);\n    if (seconds > 0 || parts.length === 0) parts.push(`${seconds}s`);\n    \n    return parts.join(' ');\n}\n\n/**\n * Get project identifier from workspace\n * @returns {string} Project identifier\n */\nfunction getProjectId() {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    \n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        return 'unknown-project';\n    }\n    \n    // Use workspace name if available, otherwise use first folder path\n    const workspaceName = vscode.workspace.name;\n    if (workspaceName) {\n        return workspaceName;\n    }\n    \n    return workspaceFolders[0].uri.fsPath;\n}\n\n/**\n * Get start of today in milliseconds\n * @returns {number} Timestamp of start of today\n */\nfunction getStartOfDay() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\n}\n\n/**\n * Get start of week in milliseconds (Monday)\n * @returns {number} Timestamp of start of week\n */\nfunction getStartOfWeek() {\n    const now = new Date();\n    const day = now.getDay();\n    const diff = now.getDate() - day + (day === 0 ? -6 : 1);\n    return new Date(now.getFullYear(), now.getMonth(), diff).getTime();\n}\n\n/**\n * Get start of month in milliseconds\n * @returns {number} Timestamp of start of month\n */\nfunction getStartOfMonth() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), 1).getTime();\n}\n\n/**\n * Check if a session is within a time range\n * @param {{ startTime: number, endTime: number }} session - Session object\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {boolean} True if session overlaps with range\n */\nfunction isSessionInRange(session, startRange, endRange) {\n    return session.startTime < endRange && session.endTime > startRange;\n}\n\n/**\n * Calculate time spent in a range from sessions\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {number} Time spent in range in milliseconds\n */\nfunction getTimeInRange(sessions, startRange, endRange) {\n    let total = 0;\n    \n    for (const session of sessions) {\n        if (isSessionInRange(session, startRange, endRange)) {\n            const overlapStart = Math.max(session.startTime, startRange);\n            const overlapEnd = Math.min(session.endTime, endRange);\n            total += overlapEnd - overlapStart;\n        }\n    }\n    \n    return total;\n}\n\n/**\n * Get daily breakdown for the last N days\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} days - Number of days to include\n * @returns {Array<{ date: string, time: number }>} Daily breakdown\n */\nfunction getDailyBreakdown(sessions, days = 7) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = days - 1; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - i);\n        const startOfDay = date.getTime();\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\n        \n        result.push({\n            date: date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),\n            time: getTimeInRange(sessions, startOfDay, endOfDay)\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get weekly breakdown for the last N weeks\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} weeks - Number of weeks to include\n * @returns {Array<{ week: string, time: number }>} Weekly breakdown\n */\nfunction getWeeklyBreakdown(sessions, weeks = 4) {\n    const result = [];\n    const now = new Date();\n    const currentDay = now.getDay();\n    const diff = now.getDate() - currentDay + (currentDay === 0 ? -6 : 1);\n    \n    for (let i = weeks - 1; i >= 0; i--) {\n        const weekStart = new Date(now.getFullYear(), now.getMonth(), diff - (i * 7));\n        const weekEnd = new Date(weekStart.getTime() + 7 * 24 * 60 * 60 * 1000);\n        \n        result.push({\n            week: `Week of ${weekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`,\n            time: getTimeInRange(sessions, weekStart.getTime(), weekEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get monthly breakdown for the last N months\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} months - Number of months to include\n * @returns {Array<{ month: string, time: number }>} Monthly breakdown\n */\nfunction getMonthlyBreakdown(sessions, months = 6) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = months - 1; i >= 0; i--) {\n        const monthStart = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const monthEnd = new Date(now.getFullYear(), now.getMonth() - i + 1, 1);\n        \n        result.push({\n            month: monthStart.toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),\n            time: getTimeInRange(sessions, monthStart.getTime(), monthEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\nmodule.exports = {\n    formatTime,\n    formatTimeHuman,\n    getProjectId,\n    getStartOfDay,\n    getStartOfWeek,\n    getStartOfMonth,\n    isSessionInRange,\n    getTimeInRange,\n    getDailyBreakdown,\n    getWeeklyBreakdown,\n    getMonthlyBreakdown\n};\n","const vscode = require('vscode');\nconst { Storage } = require('./storage');\nconst { Tracker } = require('./tracker');\nconst { StatusBar } = require('./statusBar');\nconst { StatsWebView } = require('./webview');\n\n/** @type {Storage} */\nlet storage;\n/** @type {Tracker} */\nlet tracker;\n/** @type {StatusBar} */\nlet statusBar;\n/** @type {StatsWebView} */\nlet webview;\n\n/**\n * Activate the extension\n * @param {vscode.ExtensionContext} context \n */\nasync function activate(context) {\n    console.log('PUNCHCARD - Work Time Statistics is now active!');\n\n    // Initialize storage\n    storage = new Storage(context);\n    await storage.initialize();\n\n    // Initialize tracker\n    tracker = new Tracker(storage);\n    tracker.initialize();\n\n    // Initialize status bar\n    statusBar = new StatusBar(tracker);\n    statusBar.initialize();\n\n    // Initialize webview\n    webview = new StatsWebView(context, storage);\n\n    // Register commands\n    const showStatsCommand = vscode.commands.registerCommand('workTimer.showStats', () => {\n        webview.show();\n    });\n\n    const resetProjectCommand = vscode.commands.registerCommand('workTimer.resetProject', async () => {\n        const projectId = tracker.getProjectId();\n        const confirm = await vscode.window.showWarningMessage(\n            `Are you sure you want to reset statistics for \"${projectId}\"?`,\n            { modal: true },\n            'Yes, Reset'\n        );\n        if (confirm === 'Yes, Reset') {\n            await storage.resetProject(projectId);\n            vscode.window.showInformationMessage(`Statistics for \"${projectId}\" have been reset.`);\n        }\n    });\n\n    const resetAllCommand = vscode.commands.registerCommand('workTimer.resetAll', async () => {\n        const confirm = await vscode.window.showWarningMessage(\n            'Are you sure you want to reset ALL statistics? This cannot be undone.',\n            { modal: true },\n            'Yes, Reset All'\n        );\n        if (confirm === 'Yes, Reset All') {\n            await storage.resetAll();\n            vscode.window.showInformationMessage('All statistics have been reset.');\n        }\n    });\n\n    const exportDataCommand = vscode.commands.registerCommand('workTimer.exportData', async () => {\n        const data = storage.getAllData();\n        const jsonContent = JSON.stringify(data, null, 2);\n        \n        const uri = await vscode.window.showSaveDialog({\n            defaultUri: vscode.Uri.file('punchcard-stats.json'),\n            filters: {\n                'JSON Files': ['json']\n            }\n        });\n\n        if (uri) {\n            await vscode.workspace.fs.writeFile(uri, Buffer.from(jsonContent, 'utf8'));\n            vscode.window.showInformationMessage(`Statistics exported to ${uri.fsPath}`);\n        }\n    });\n\n    // Add commands to subscriptions\n    context.subscriptions.push(\n        showStatsCommand,\n        resetProjectCommand,\n        resetAllCommand,\n        exportDataCommand\n    );\n\n    // Add disposables\n    context.subscriptions.push({\n        dispose: () => {\n            tracker.dispose();\n            statusBar.dispose();\n            webview.dispose();\n        }\n    });\n}\n\n/**\n * Deactivate the extension\n */\nfunction deactivate() {\n    if (tracker) {\n        tracker.dispose();\n    }\n    if (statusBar) {\n        statusBar.dispose();\n    }\n    if (webview) {\n        webview.dispose();\n    }\n}\n\nmodule.exports = {\n    activate,\n    deactivate\n};\n","const vscode = require('vscode');\nconst { formatTime } = require('./utils');\n\n/**\n * Status bar item manager\n */\nclass StatusBar {\n    /**\n     * @param {import('./tracker').Tracker} tracker \n     */\n    constructor(tracker) {\n        this.tracker = tracker;\n        this.statusBarItem = vscode.window.createStatusBarItem(\n            vscode.StatusBarAlignment.Left,\n            100\n        );\n        this.statusBarItem.command = 'workTimer.showStats';\n        this.statusBarItem.tooltip = 'Click to view work time statistics';\n        this.updateInterval = null;\n    }\n\n    /**\n     * Initialize the status bar\n     */\n    initialize() {\n        this.statusBarItem.show();\n        this.update();\n\n        // Update every second\n        this.updateInterval = setInterval(() => this.update(), 1000);\n\n        // Listen for time updates from tracker\n        this.tracker.onTimeUpdate(() => this.update());\n        this.tracker.onAfkChange((isAfk) => this.updateAfkStatus(isAfk));\n    }\n\n    /**\n     * Update the status bar display\n     */\n    update() {\n        const sessionTime = this.tracker.getCurrentSessionTime();\n        const todayTime = this.tracker.getTodayTime();\n        const isTracking = this.tracker.isCurrentlyTracking();\n\n        const sessionStr = formatTime(sessionTime);\n        const todayStr = formatTime(todayTime);\n\n        const icon = isTracking ? '$(clock)' : '$(debug-pause)';\n        this.statusBarItem.text = `${icon} ${sessionStr} | Today: ${todayStr}`;\n        \n        if (!isTracking) {\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n        }\n    }\n\n    /**\n     * Update AFK status display\n     * @param {boolean} isAfk \n     */\n    updateAfkStatus(isAfk) {\n        if (isAfk) {\n            this.statusBarItem.text = `$(debug-pause) AFK - ${this.statusBarItem.text.split(' | ')[1] || ''}`;\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n            this.update();\n        }\n    }\n\n    /**\n     * Dispose the status bar\n     */\n    dispose() {\n        if (this.updateInterval) {\n            clearInterval(this.updateInterval);\n            this.updateInterval = null;\n        }\n        this.statusBarItem.dispose();\n    }\n}\n\nmodule.exports = { StatusBar };\n","const { createEmptyProjectStats, createEmptyStorageData } = require('./types');\n\nconst STORAGE_KEY = 'punchcard-work-stats';\nconst SYNC_KEYS = [STORAGE_KEY];\n\n/**\n * Storage manager for work time statistics\n */\nclass Storage {\n    /**\n     * @param {import('vscode').ExtensionContext} context \n     */\n    constructor(context) {\n        this.context = context;\n        this.data = createEmptyStorageData();\n        this.initialized = false;\n    }\n\n    /**\n     * Initialize storage and set up sync\n     */\n    async initialize() {\n        // Enable sync for our storage key\n        this.context.globalState.setKeysForSync(SYNC_KEYS);\n        \n        // Load existing data\n        await this.load();\n        this.initialized = true;\n    }\n\n    /**\n     * Load data from global state\n     */\n    async load() {\n        const stored = this.context.globalState.get(STORAGE_KEY);\n        \n        if (stored) {\n            this.data = {\n                projects: stored.projects || {},\n                totalTimeAllProjects: stored.totalTimeAllProjects || 0,\n                totalKeystrokes: stored.totalKeystrokes || 0\n            };\n        } else {\n            this.data = createEmptyStorageData();\n        }\n    }\n\n    /**\n     * Save data to global state\n     */\n    async save() {\n        await this.context.globalState.update(STORAGE_KEY, this.data);\n    }\n\n    /**\n     * Get stats for a specific project\n     * @param {string} projectId \n     * @returns {import('./types').ProjectStats}\n     */\n    getProjectStats(projectId) {\n        if (!this.data.projects[projectId]) {\n            this.data.projects[projectId] = createEmptyProjectStats();\n        }\n        return this.data.projects[projectId];\n    }\n\n    /**\n     * Update stats for a project\n     * @param {string} projectId \n     * @param {Partial<import('./types').ProjectStats>} updates \n     */\n    async updateProjectStats(projectId, updates) {\n        const stats = this.getProjectStats(projectId);\n        Object.assign(stats, updates);\n        await this.save();\n    }\n\n    /**\n     * Add time to a project\n     * @param {string} projectId \n     * @param {number} timeMs \n     */\n    async addTime(projectId, timeMs) {\n        const stats = this.getProjectStats(projectId);\n        stats.totalTime += timeMs;\n        stats.lastActive = Date.now();\n        this.data.totalTimeAllProjects += timeMs;\n        await this.save();\n    }\n\n    /**\n     * Add a completed session\n     * @param {string} projectId \n     * @param {import('./types').Session} session \n     */\n    async addSession(projectId, session) {\n        const stats = this.getProjectStats(projectId);\n        stats.sessions.push(session);\n        await this.save();\n    }\n\n    /**\n     * Update the last session end time\n     * @param {string} projectId \n     * @param {number} endTime \n     * @param {number} duration \n     */\n    async updateLastSession(projectId, endTime, duration) {\n        const stats = this.getProjectStats(projectId);\n        if (stats.sessions.length > 0) {\n            const lastSession = stats.sessions[stats.sessions.length - 1];\n            lastSession.endTime = endTime;\n            lastSession.duration = duration;\n            await this.save();\n        }\n    }\n\n    /**\n     * Add metrics to a project\n     * @param {string} projectId \n     * @param {{ linesAdded?: number, linesDeleted?: number, charactersAdded?: number, charactersDeleted?: number, keystrokes?: number }} metrics \n     */\n    async addMetrics(projectId, metrics) {\n        const stats = this.getProjectStats(projectId);\n        \n        if (metrics.linesAdded) {\n            stats.linesAdded += metrics.linesAdded;\n        }\n        if (metrics.linesDeleted) {\n            stats.linesDeleted += metrics.linesDeleted;\n        }\n        if (metrics.charactersAdded) {\n            stats.charactersAdded += metrics.charactersAdded;\n        }\n        if (metrics.charactersDeleted) {\n            stats.charactersDeleted += metrics.charactersDeleted;\n        }\n        if (metrics.keystrokes) {\n            stats.keystrokes += metrics.keystrokes;\n            this.data.totalKeystrokes += metrics.keystrokes;\n        }\n        \n        stats.lastActive = Date.now();\n        await this.save();\n    }\n\n    /**\n     * Reset stats for a specific project\n     * @param {string} projectId \n     */\n    async resetProject(projectId) {\n        if (this.data.projects[projectId]) {\n            const oldStats = this.data.projects[projectId];\n            this.data.totalTimeAllProjects -= oldStats.totalTime;\n            this.data.totalKeystrokes -= oldStats.keystrokes;\n            delete this.data.projects[projectId];\n            await this.save();\n        }\n    }\n\n    /**\n     * Reset all statistics\n     */\n    async resetAll() {\n        this.data = createEmptyStorageData();\n        await this.save();\n    }\n\n    /**\n     * Get all data for export\n     * @returns {import('./types').StorageData}\n     */\n    getAllData() {\n        return { ...this.data };\n    }\n\n    /**\n     * Get summary statistics\n     */\n    getSummary() {\n        const projectCount = Object.keys(this.data.projects).length;\n        let totalSessions = 0;\n        let totalLinesAdded = 0;\n        let totalLinesDeleted = 0;\n        let totalCharsAdded = 0;\n        let totalCharsDeleted = 0;\n\n        for (const projectId in this.data.projects) {\n            const stats = this.data.projects[projectId];\n            totalSessions += stats.sessions.length;\n            totalLinesAdded += stats.linesAdded;\n            totalLinesDeleted += stats.linesDeleted;\n            totalCharsAdded += stats.charactersAdded;\n            totalCharsDeleted += stats.charactersDeleted;\n        }\n\n        return {\n            projectCount,\n            totalTime: this.data.totalTimeAllProjects,\n            totalKeystrokes: this.data.totalKeystrokes,\n            totalSessions,\n            totalLinesAdded,\n            totalLinesDeleted,\n            totalCharsAdded,\n            totalCharsDeleted\n        };\n    }\n}\n\nmodule.exports = { Storage, STORAGE_KEY };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(497);\n"],"names":["vscode","formatTime","formatTimeHuman","getDailyBreakdown","getWeeklyBreakdown","getMonthlyBreakdown","getTimeInRange","getStartOfDay","module","exports","StatsWebView","constructor","context","storage","this","panel","show","reveal","ViewColumn","One","update","window","createWebviewPanel","enableScripts","retainContextWhenHidden","webview","html","getWebviewContent","onDidReceiveMessage","async","message","command","showWarningMessage","projectId","modal","resetProject","showInformationMessage","undefined","subscriptions","onDidDispose","data","getAllData","summary","getSummary","projects","allSessions","push","sessions","dailyData","weeklyData","monthlyData","startOfDay","todayTime","totalTime","projectCount","totalSessions","formatNumber","totalKeystrokes","totalLinesAdded","totalLinesDeleted","totalCharsAdded","Object","keys","length","entries","map","stats","escapeHtml","keystrokes","linesAdded","linesDeleted","charactersAdded","lastActive","Date","toLocaleDateString","join","JSON","stringify","name","time","num","toLocaleString","text","div","replace","m","dispose","getProjectId","createEmptyProjectStats","Tracker","isTracking","lastActivity","now","sessionStartTime","currentSessionTime","isAfk","afkThreshold","checkInterval","disposables","onTimeUpdateCallback","onAfkChangeCallback","initialize","loadConfig","workspace","onDidChangeConfiguration","e","affectsConfiguration","getConfiguration","get","start","config","registerActivityListeners","setInterval","tick","addSession","startTime","endTime","duration","stop","clearInterval","disposeActivityListeners","updateLastSession","onDidChangeTextDocument","onActivity","trackDocumentChanges","onDidChangeTextEditorSelection","onDidChangeTextEditorVisibleRanges","onDidChangeActiveTextEditor","disposable","wasAfk","event","contentChanges","charsAdded","charsDeleted","change","rangeLength","match","range","end","line","Math","max","addMetrics","charactersDeleted","addTime","onTimeUpdate","callback","onAfkChange","getCurrentSessionTime","getTodayTime","getProjectStats","setHours","startTimestamp","getTime","session","isCurrentlyTracking","createEmptyStorageData","totalTimeAllProjects","require","isSessionInRange","startRange","endRange","total","overlapStart","min","ms","totalSeconds","floor","hours","minutes","seconds","toString","padStart","parts","workspaceFolders","uri","fsPath","getFullYear","getMonth","getDate","getStartOfWeek","day","getDay","diff","getStartOfMonth","days","result","i","date","endOfDay","weekday","month","weeks","currentDay","weekStart","weekEnd","week","months","monthStart","monthEnd","year","Storage","StatusBar","tracker","statusBar","activate","console","log","showStatsCommand","commands","registerCommand","resetProjectCommand","resetAllCommand","resetAll","exportDataCommand","jsonContent","showSaveDialog","defaultUri","Uri","file","filters","fs","writeFile","Buffer","from","deactivate","statusBarItem","createStatusBarItem","StatusBarAlignment","Left","tooltip","updateInterval","updateAfkStatus","sessionTime","sessionStr","todayStr","icon","backgroundColor","ThemeColor","split","STORAGE_KEY","SYNC_KEYS","initialized","globalState","setKeysForSync","load","stored","save","updateProjectStats","updates","assign","timeMs","lastSession","metrics","oldStats","totalCharsDeleted","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"ignoreList":[],"sourceRoot":""}