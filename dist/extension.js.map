{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://punchcard-work-time-statistics/./src/webview.js","webpack://punchcard-work-time-statistics/./src/tracker.js","webpack://punchcard-work-time-statistics/./src/types.js","webpack://punchcard-work-time-statistics/external commonjs \"vscode\"","webpack://punchcard-work-time-statistics/./src/utils.js","webpack://punchcard-work-time-statistics/./src/extension.js","webpack://punchcard-work-time-statistics/./src/statusBar.js","webpack://punchcard-work-time-statistics/./src/storage.js","webpack://punchcard-work-time-statistics/webpack/bootstrap","webpack://punchcard-work-time-statistics/webpack/startup"],"sourcesContent":["const vscode = require('vscode');\r\nconst { formatTime, formatTimeHuman, getDailyBreakdown, getWeeklyBreakdown, getMonthlyBreakdown, getTimeInRange, getStartOfDay } = require('./utils');\r\n\r\n/**\r\n * WebView panel for displaying statistics\r\n */\r\nclass StatsWebView {\r\n    /**\r\n     * @param {vscode.ExtensionContext} context \r\n     * @param {import('./storage').Storage} storage \r\n     */\r\n    constructor(context, storage) {\r\n        this.context = context;\r\n        this.storage = storage;\r\n        this.panel = null;\r\n    }\r\n\r\n    /**\r\n     * Show the statistics panel\r\n     */\r\n    show() {\r\n        if (this.panel) {\r\n            this.panel.reveal(vscode.ViewColumn.One);\r\n            this.update();\r\n            return;\r\n        }\r\n\r\n        this.panel = vscode.window.createWebviewPanel(\r\n            'workTimerStats',\r\n            'PUNCHCARD - Work Time Statistics',\r\n            vscode.ViewColumn.One,\r\n            {\r\n                enableScripts: true,\r\n                retainContextWhenHidden: true\r\n            }\r\n        );\r\n\r\n        this.panel.webview.html = this.getWebviewContent();\r\n\r\n        this.panel.webview.onDidReceiveMessage(\r\n            async (message) => {\r\n                switch (message.command) {\r\n                    case 'resetProject':\r\n                        const confirmReset = await vscode.window.showWarningMessage(\r\n                            `Are you sure you want to reset statistics for \"${message.projectId}\"?`,\r\n                            { modal: true },\r\n                            'Yes, Reset'\r\n                        );\r\n                        if (confirmReset === 'Yes, Reset') {\r\n                            await this.storage.resetProject(message.projectId);\r\n                            this.update();\r\n                            vscode.window.showInformationMessage(`Statistics for \"${message.projectId}\" have been reset.`);\r\n                        }\r\n                        break;\r\n                    case 'resetStat':\r\n                        const confirmStatReset = await vscode.window.showWarningMessage(\r\n                            `Are you sure you want to reset ${message.statLabel} for \"${message.projectId}\"?`,\r\n                            { modal: true },\r\n                            'Yes, Reset'\r\n                        );\r\n                        if (confirmStatReset === 'Yes, Reset') {\r\n                            await this.storage.resetProjectStat(message.projectId, message.statName);\r\n                            this.update();\r\n                            vscode.window.showInformationMessage(`${message.statLabel} for \"${message.projectId}\" has been reset.`);\r\n                        }\r\n                        break;\r\n                    case 'resetGlobalStat':\r\n                        const confirmGlobalReset = await vscode.window.showWarningMessage(\r\n                            `Are you sure you want to reset ${message.statLabel} for ALL projects?`,\r\n                            { modal: true },\r\n                            'Yes, Reset All'\r\n                        );\r\n                        if (confirmGlobalReset === 'Yes, Reset All') {\r\n                            await this.storage.resetGlobalStat(message.statName);\r\n                            this.update();\r\n                            vscode.window.showInformationMessage(`${message.statLabel} has been reset for all projects.`);\r\n                        }\r\n                        break;\r\n                    case 'refresh':\r\n                        this.update();\r\n                        break;\r\n                }\r\n            },\r\n            undefined,\r\n            this.context.subscriptions\r\n        );\r\n\r\n        this.panel.onDidDispose(\r\n            () => {\r\n                this.panel = null;\r\n            },\r\n            null,\r\n            this.context.subscriptions\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Update the webview content\r\n     */\r\n    update() {\r\n        if (this.panel) {\r\n            this.panel.webview.html = this.getWebviewContent();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the HTML content for the webview\r\n     * @returns {string}\r\n     */\r\n    getWebviewContent() {\r\n        const data = this.storage.getAllData();\r\n        const summary = this.storage.getSummary();\r\n        const projects = data.projects;\r\n\r\n        // Prepare chart data\r\n        const allSessions = [];\r\n        for (const projectId in projects) {\r\n            allSessions.push(...projects[projectId].sessions);\r\n        }\r\n\r\n        const dailyData = getDailyBreakdown(allSessions, 7);\r\n        const weeklyData = getWeeklyBreakdown(allSessions, 4);\r\n        const monthlyData = getMonthlyBreakdown(allSessions, 6);\r\n\r\n        // Calculate today's time\r\n        const startOfDay = getStartOfDay();\r\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\r\n        const todayTime = getTimeInRange(allSessions, startOfDay, endOfDay);\r\n\r\n        return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>PUNCHCARD - Work Time Statistics</title>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\r\n    <style>\r\n        :root {\r\n            --bg-color: var(--vscode-editor-background);\r\n            --text-color: var(--vscode-editor-foreground);\r\n            --border-color: var(--vscode-panel-border);\r\n            --card-bg: var(--vscode-editorWidget-background);\r\n            --accent-color: var(--vscode-button-background);\r\n            --accent-hover: var(--vscode-button-hoverBackground);\r\n            --danger-color: var(--vscode-errorForeground);\r\n        }\r\n\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        body {\r\n            font-family: var(--vscode-font-family);\r\n            background-color: var(--bg-color);\r\n            color: var(--text-color);\r\n            padding: 20px;\r\n            line-height: 1.6;\r\n        }\r\n\r\n        h1, h2, h3 {\r\n            margin-bottom: 15px;\r\n            font-weight: 600;\r\n        }\r\n\r\n        h1 {\r\n            font-size: 24px;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 10px;\r\n        }\r\n\r\n        h1::before {\r\n            content: \"‚è±Ô∏è\";\r\n        }\r\n\r\n        .header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 30px;\r\n            padding-bottom: 15px;\r\n            border-bottom: 1px solid var(--border-color);\r\n        }\r\n\r\n        .refresh-btn {\r\n            background-color: var(--accent-color);\r\n            color: var(--vscode-button-foreground);\r\n            border: none;\r\n            padding: 8px 16px;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 14px;\r\n        }\r\n\r\n        .refresh-btn:hover {\r\n            background-color: var(--accent-hover);\r\n        }\r\n\r\n        .summary-grid {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n            gap: 15px;\r\n            margin-bottom: 30px;\r\n        }\r\n\r\n        .summary-card {\r\n            background-color: var(--card-bg);\r\n            border: 1px solid var(--border-color);\r\n            border-radius: 8px;\r\n            padding: 20px;\r\n            text-align: center;\r\n            position: relative;\r\n        }\r\n\r\n        .summary-card:hover .summary-reset-btn {\r\n            opacity: 1;\r\n        }\r\n\r\n        .summary-reset-btn {\r\n            position: absolute;\r\n            top: 5px;\r\n            right: 5px;\r\n            background: transparent;\r\n            border: none;\r\n            color: var(--danger-color);\r\n            cursor: pointer;\r\n            font-size: 10px;\r\n            padding: 2px 6px;\r\n            opacity: 0;\r\n            transition: opacity 0.2s;\r\n            border-radius: 3px;\r\n        }\r\n\r\n        .summary-reset-btn:hover {\r\n            background-color: var(--danger-color);\r\n            color: white;\r\n        }\r\n\r\n        .summary-card .value {\r\n            font-size: 28px;\r\n            font-weight: bold;\r\n            color: var(--accent-color);\r\n            margin-bottom: 5px;\r\n        }\r\n\r\n        .summary-card .label {\r\n            font-size: 12px;\r\n            opacity: 0.8;\r\n            text-transform: uppercase;\r\n        }\r\n\r\n        .charts-container {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n            gap: 20px;\r\n            margin-bottom: 30px;\r\n        }\r\n\r\n        .chart-card {\r\n            background-color: var(--card-bg);\r\n            border: 1px solid var(--border-color);\r\n            border-radius: 8px;\r\n            padding: 20px;\r\n        }\r\n\r\n        .chart-card h3 {\r\n            margin-bottom: 20px;\r\n        }\r\n\r\n        .chart-container {\r\n            position: relative;\r\n            height: 250px;\r\n        }\r\n\r\n        .projects-section {\r\n            margin-top: 30px;\r\n        }\r\n\r\n        .project-card {\r\n            background-color: var(--card-bg);\r\n            border: 1px solid var(--border-color);\r\n            border-radius: 8px;\r\n            padding: 20px;\r\n            margin-bottom: 15px;\r\n        }\r\n\r\n        .project-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-bottom: 15px;\r\n        }\r\n\r\n        .project-name {\r\n            font-size: 18px;\r\n            font-weight: 600;\r\n        }\r\n\r\n        .reset-btn {\r\n            background-color: transparent;\r\n            color: var(--danger-color);\r\n            border: 1px solid var(--danger-color);\r\n            padding: 5px 10px;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 12px;\r\n        }\r\n\r\n        .reset-btn:hover {\r\n            background-color: var(--danger-color);\r\n            color: white;\r\n        }\r\n\r\n        .project-stats {\r\n            display: grid;\r\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n            gap: 10px;\r\n        }\r\n\r\n        .stat {\r\n            display: flex;\r\n            flex-direction: column;\r\n            position: relative;\r\n        }\r\n\r\n        .stat:hover .stat-reset-btn {\r\n            opacity: 1;\r\n        }\r\n\r\n        .stat-reset-btn {\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            background: transparent;\r\n            border: none;\r\n            color: var(--danger-color);\r\n            cursor: pointer;\r\n            font-size: 10px;\r\n            padding: 2px 5px;\r\n            opacity: 0;\r\n            transition: opacity 0.2s;\r\n            border-radius: 3px;\r\n        }\r\n\r\n        .stat-reset-btn:hover {\r\n            background-color: var(--danger-color);\r\n            color: white;\r\n        }\r\n\r\n        .stat .stat-value {\r\n            font-size: 20px;\r\n            font-weight: bold;\r\n        }\r\n\r\n        .stat .stat-label {\r\n            font-size: 11px;\r\n            opacity: 0.7;\r\n            text-transform: uppercase;\r\n        }\r\n\r\n        .no-data {\r\n            text-align: center;\r\n            padding: 40px;\r\n            opacity: 0.6;\r\n        }\r\n\r\n        @media (max-width: 600px) {\r\n            .charts-container {\r\n                grid-template-columns: 1fr;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"header\">\r\n        <h1>PUNCHCARD - Work Time Statistics</h1>\r\n        <button class=\"refresh-btn\" onclick=\"refresh()\">üîÑ Refresh</button>\r\n    </div>\r\n\r\n    <div class=\"summary-grid\">\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('totalTime', 'Total Time')\">‚úï</button>\r\n            <div class=\"value\">${formatTime(summary.totalTime)}</div>\r\n            <div class=\"label\">Total Time</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <div class=\"value\">${formatTime(todayTime)}</div>\r\n            <div class=\"label\">Today</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <div class=\"value\">${summary.projectCount}</div>\r\n            <div class=\"label\">Projects</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('sessions', 'Sessions')\">‚úï</button>\r\n            <div class=\"value\">${summary.totalSessions}</div>\r\n            <div class=\"label\">Sessions</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('keystrokes', 'Keystrokes')\">‚úï</button>\r\n            <div class=\"value\">${this.formatNumber(summary.totalKeystrokes)}</div>\r\n            <div class=\"label\">Keystrokes</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesAdded', 'Lines Added (Typed)')\">‚úï</button>\r\n            <div class=\"value\">+${this.formatNumber(summary.totalLinesAdded)}</div>\r\n            <div class=\"label\">Lines Added (Typed)</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesDeleted', 'Lines Deleted (Typed)')\">‚úï</button>\r\n            <div class=\"value\">-${this.formatNumber(summary.totalLinesDeleted)}</div>\r\n            <div class=\"label\">Lines Deleted (Typed)</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesAddedBulk', 'Lines Added (Bulk)')\">‚úï</button>\r\n            <div class=\"value\">+${this.formatNumber(summary.totalLinesAddedBulk || 0)}</div>\r\n            <div class=\"label\">Lines Added (Bulk/Paste)</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('charactersAdded', 'Characters Added')\">‚úï</button>\r\n            <div class=\"value\">${this.formatNumber(summary.totalCharsAdded)}</div>\r\n            <div class=\"label\">Chars Added</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"charts-container\">\r\n        <div class=\"chart-card\">\r\n            <h3>üìÖ Daily Activity (Last 7 Days)</h3>\r\n            <div class=\"chart-container\">\r\n                <canvas id=\"dailyChart\"></canvas>\r\n            </div>\r\n        </div>\r\n        <div class=\"chart-card\">\r\n            <h3>üìä Weekly Activity (Last 4 Weeks)</h3>\r\n            <div class=\"chart-container\">\r\n                <canvas id=\"weeklyChart\"></canvas>\r\n            </div>\r\n        </div>\r\n        <div class=\"chart-card\">\r\n            <h3>üìà Monthly Activity (Last 6 Months)</h3>\r\n            <div class=\"chart-container\">\r\n                <canvas id=\"monthlyChart\"></canvas>\r\n            </div>\r\n        </div>\r\n        <div class=\"chart-card\">\r\n            <h3>ü•ß Time by Project</h3>\r\n            <div class=\"chart-container\">\r\n                <canvas id=\"projectsChart\"></canvas>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"projects-section\">\r\n        <h2>üìÅ Projects</h2>\r\n        ${Object.keys(projects).length === 0 ? \r\n            '<div class=\"no-data\">No projects tracked yet. Start coding to see your statistics!</div>' :\r\n            Object.entries(projects).map(([projectId, stats]) => `\r\n                <div class=\"project-card\">\r\n                    <div class=\"project-header\">\r\n                        <span class=\"project-name\">${this.escapeHtml(projectId)}</span>\r\n                        <button class=\"reset-btn\" onclick=\"resetProject('${this.escapeHtml(projectId)}')\">üóëÔ∏è Reset All</button>\r\n                    </div>\r\n                    <div class=\"project-stats\">\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">${formatTime(stats.totalTime)}</span>\r\n                            <span class=\"stat-label\">Total Time</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'totalTime', 'Total Time')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">${stats.sessions.length}</span>\r\n                            <span class=\"stat-label\">Sessions</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'sessions', 'Sessions')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">${this.formatNumber(stats.keystrokes)}</span>\r\n                            <span class=\"stat-label\">Keystrokes</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'keystrokes', 'Keystrokes')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">+${this.formatNumber(stats.linesAdded)}</span>\r\n                            <span class=\"stat-label\">Lines (Typed)</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesAdded', 'Lines Added (Typed)')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">-${this.formatNumber(stats.linesDeleted)}</span>\r\n                            <span class=\"stat-label\">Lines Del (Typed)</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesDeleted', 'Lines Deleted (Typed)')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">+${this.formatNumber(stats.linesAddedBulk || 0)}</span>\r\n                            <span class=\"stat-label\">Lines (Bulk/Paste)</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesAddedBulk', 'Lines Added (Bulk)')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">${this.formatNumber(stats.charactersAdded)}</span>\r\n                            <span class=\"stat-label\">Chars Added</span>\r\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'charactersAdded', 'Characters Added')\">‚úï</button>\r\n                        </div>\r\n                        <div class=\"stat\">\r\n                            <span class=\"stat-value\">${stats.lastActive ? new Date(stats.lastActive).toLocaleDateString() : 'Never'}</span>\r\n                            <span class=\"stat-label\">Last Active</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `).join('')\r\n        }\r\n    </div>\r\n\r\n    <script>\r\n        const vscode = acquireVsCodeApi();\r\n\r\n        function refresh() {\r\n            vscode.postMessage({ command: 'refresh' });\r\n        }\r\n\r\n        function resetProject(projectId) {\r\n            vscode.postMessage({ command: 'resetProject', projectId: projectId });\r\n        }\r\n\r\n        function resetStat(projectId, statName, statLabel) {\r\n            vscode.postMessage({ command: 'resetStat', projectId: projectId, statName: statName, statLabel: statLabel });\r\n        }\r\n\r\n        function resetGlobalStat(statName, statLabel) {\r\n            vscode.postMessage({ command: 'resetGlobalStat', statName: statName, statLabel: statLabel });\r\n        }\r\n\r\n        // Chart.js configuration\r\n        Chart.defaults.color = getComputedStyle(document.body).getPropertyValue('--vscode-editor-foreground') || '#ffffff';\r\n        Chart.defaults.borderColor = getComputedStyle(document.body).getPropertyValue('--vscode-panel-border') || '#333333';\r\n\r\n        const chartColors = [\r\n            '#4FC3F7', '#81C784', '#FFB74D', '#F06292', '#BA68C8',\r\n            '#4DD0E1', '#AED581', '#FF8A65', '#9575CD', '#7986CB'\r\n        ];\r\n\r\n        // Daily Chart\r\n        const dailyData = ${JSON.stringify(dailyData)};\r\n        new Chart(document.getElementById('dailyChart'), {\r\n            type: 'bar',\r\n            data: {\r\n                labels: dailyData.map(d => d.date),\r\n                datasets: [{\r\n                    label: 'Hours',\r\n                    data: dailyData.map(d => (d.time / 3600000).toFixed(2)),\r\n                    backgroundColor: '#4FC3F7',\r\n                    borderRadius: 4\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: { display: false }\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true,\r\n                        title: { display: true, text: 'Hours' }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Weekly Chart\r\n        const weeklyData = ${JSON.stringify(weeklyData)};\r\n        new Chart(document.getElementById('weeklyChart'), {\r\n            type: 'bar',\r\n            data: {\r\n                labels: weeklyData.map(d => d.week),\r\n                datasets: [{\r\n                    label: 'Hours',\r\n                    data: weeklyData.map(d => (d.time / 3600000).toFixed(2)),\r\n                    backgroundColor: '#81C784',\r\n                    borderRadius: 4\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: { display: false }\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true,\r\n                        title: { display: true, text: 'Hours' }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Monthly Chart\r\n        const monthlyData = ${JSON.stringify(monthlyData)};\r\n        new Chart(document.getElementById('monthlyChart'), {\r\n            type: 'line',\r\n            data: {\r\n                labels: monthlyData.map(d => d.month),\r\n                datasets: [{\r\n                    label: 'Hours',\r\n                    data: monthlyData.map(d => (d.time / 3600000).toFixed(2)),\r\n                    borderColor: '#FFB74D',\r\n                    backgroundColor: 'rgba(255, 183, 77, 0.2)',\r\n                    fill: true,\r\n                    tension: 0.3\r\n                }]\r\n            },\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                plugins: {\r\n                    legend: { display: false }\r\n                },\r\n                scales: {\r\n                    y: {\r\n                        beginAtZero: true,\r\n                        title: { display: true, text: 'Hours' }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Projects Pie Chart\r\n        const projectsData = ${JSON.stringify(Object.entries(projects).map(([name, stats]) => ({ name, time: stats.totalTime })))};\r\n        if (projectsData.length > 0) {\r\n            new Chart(document.getElementById('projectsChart'), {\r\n                type: 'doughnut',\r\n                data: {\r\n                    labels: projectsData.map(d => d.name),\r\n                    datasets: [{\r\n                        data: projectsData.map(d => (d.time / 3600000).toFixed(2)),\r\n                        backgroundColor: chartColors.slice(0, projectsData.length)\r\n                    }]\r\n                },\r\n                options: {\r\n                    responsive: true,\r\n                    maintainAspectRatio: false,\r\n                    plugins: {\r\n                        legend: {\r\n                            position: 'right',\r\n                            labels: {\r\n                                boxWidth: 12,\r\n                                padding: 10\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    </script>\r\n</body>\r\n</html>`;\r\n    }\r\n\r\n    /**\r\n     * Format a number with thousands separator\r\n     * @param {number} num \r\n     * @returns {string}\r\n     */\r\n    formatNumber(num) {\r\n        return num.toLocaleString();\r\n    }\r\n\r\n    /**\r\n     * Escape HTML special characters\r\n     * @param {string} text \r\n     * @returns {string}\r\n     */\r\n    escapeHtml(text) {\r\n        const div = { \r\n            '&': '&amp;', \r\n            '<': '&lt;', \r\n            '>': '&gt;', \r\n            '\"': '&quot;', \r\n            \"'\": '&#039;' \r\n        };\r\n        return text.replace(/[&<>\"']/g, (m) => div[m]);\r\n    }\r\n\r\n    /**\r\n     * Dispose the webview\r\n     */\r\n    dispose() {\r\n        if (this.panel) {\r\n            this.panel.dispose();\r\n            this.panel = null;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = { StatsWebView };\r\n","const vscode = require('vscode');\r\nconst { getProjectId } = require('./utils');\r\nconst { createEmptyProjectStats } = require('./types');\r\n\r\n/**\r\n * Time tracker for monitoring user activity\r\n */\r\nclass Tracker {\r\n    /**\r\n     * @param {import('./storage').Storage} storage \r\n     */\r\n    constructor(storage) {\r\n        this.storage = storage;\r\n        this.projectId = getProjectId();\r\n        this.isTracking = false;\r\n        this.lastActivity = Date.now();\r\n        this.sessionStartTime = 0;\r\n        this.currentSessionTime = 0;\r\n        this.isAfk = false;\r\n        this.afkThreshold = 300000; // 5 minutes default\r\n        this.checkInterval = null;\r\n        this.disposables = [];\r\n        this.onTimeUpdateCallback = null;\r\n        this.onAfkChangeCallback = null;\r\n    }\r\n\r\n    /**\r\n     * Initialize the tracker\r\n     */\r\n    initialize() {\r\n        // Load configuration\r\n        this.loadConfig();\r\n\r\n        // Listen for config changes\r\n        this.disposables.push(\r\n            vscode.workspace.onDidChangeConfiguration((e) => {\r\n                if (e.affectsConfiguration('punchcardWorkTimer')) {\r\n                    this.loadConfig();\r\n                }\r\n            })\r\n        );\r\n\r\n        // Check if we should track on startup\r\n        const config = vscode.workspace.getConfiguration('punchcardWorkTimer');\r\n        if (config.get('trackOnStartup', true)) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load configuration\r\n     */\r\n    loadConfig() {\r\n        const config = vscode.workspace.getConfiguration('punchcardWorkTimer');\r\n        this.afkThreshold = config.get('afkThreshold', 300000);\r\n    }\r\n\r\n    /**\r\n     * Start tracking\r\n     */\r\n    start() {\r\n        if (this.isTracking) {\r\n            return;\r\n        }\r\n\r\n        this.isTracking = true;\r\n        this.lastActivity = Date.now();\r\n        this.sessionStartTime = Date.now();\r\n        this.currentSessionTime = 0;\r\n        this.isAfk = false;\r\n\r\n        // Register activity listeners\r\n        this.registerActivityListeners();\r\n\r\n        // Start the check interval (every second)\r\n        this.checkInterval = setInterval(() => this.tick(), 1000);\r\n\r\n        // Create a new session\r\n        this.storage.addSession(this.projectId, {\r\n            startTime: this.sessionStartTime,\r\n            endTime: this.sessionStartTime,\r\n            duration: 0\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Stop tracking\r\n     */\r\n    stop() {\r\n        if (!this.isTracking) {\r\n            return;\r\n        }\r\n\r\n        this.isTracking = false;\r\n\r\n        // Clear interval\r\n        if (this.checkInterval) {\r\n            clearInterval(this.checkInterval);\r\n            this.checkInterval = null;\r\n        }\r\n\r\n        // Dispose activity listeners\r\n        this.disposeActivityListeners();\r\n\r\n        // Finalize session\r\n        if (this.sessionStartTime > 0) {\r\n            const endTime = Date.now();\r\n            this.storage.updateLastSession(\r\n                this.projectId,\r\n                endTime,\r\n                this.currentSessionTime\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Register activity event listeners\r\n     */\r\n    registerActivityListeners() {\r\n        // Text document changes (typing)\r\n        this.disposables.push(\r\n            vscode.workspace.onDidChangeTextDocument((e) => {\r\n                this.onActivity();\r\n                this.trackDocumentChanges(e);\r\n            })\r\n        );\r\n\r\n        // Cursor movement\r\n        this.disposables.push(\r\n            vscode.window.onDidChangeTextEditorSelection(() => {\r\n                this.onActivity();\r\n            })\r\n        );\r\n\r\n        // Scrolling\r\n        this.disposables.push(\r\n            vscode.window.onDidChangeTextEditorVisibleRanges(() => {\r\n                this.onActivity();\r\n            })\r\n        );\r\n\r\n        // File switching\r\n        this.disposables.push(\r\n            vscode.window.onDidChangeActiveTextEditor(() => {\r\n                this.onActivity();\r\n                // Update project ID in case workspace changed\r\n                this.projectId = getProjectId();\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Dispose activity listeners\r\n     */\r\n    disposeActivityListeners() {\r\n        for (const disposable of this.disposables) {\r\n            disposable.dispose();\r\n        }\r\n        this.disposables = [];\r\n    }\r\n\r\n    /**\r\n     * Called when any activity is detected\r\n     */\r\n    onActivity() {\r\n        const wasAfk = this.isAfk;\r\n        this.lastActivity = Date.now();\r\n        this.isAfk = false;\r\n\r\n        if (wasAfk && this.onAfkChangeCallback) {\r\n            this.onAfkChangeCallback(false);\r\n            \r\n            // Start a new session when coming back from AFK\r\n            this.sessionStartTime = Date.now();\r\n            this.currentSessionTime = 0;\r\n            this.storage.addSession(this.projectId, {\r\n                startTime: this.sessionStartTime,\r\n                endTime: this.sessionStartTime,\r\n                duration: 0\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Track document changes (keystrokes, lines, characters)\r\n     * Distinguishes between typed input and bulk operations (paste, format, git ops)\r\n     * @param {vscode.TextDocumentChangeEvent} event \r\n     */\r\n    trackDocumentChanges(event) {\r\n        if (!event.contentChanges.length) {\r\n            return;\r\n        }\r\n\r\n        let linesAdded = 0;\r\n        let linesDeleted = 0;\r\n        let charsAdded = 0;\r\n        let charsDeleted = 0;\r\n        let keystrokes = 0;\r\n        let linesAddedBulk = 0;\r\n        let linesDeletedBulk = 0;\r\n\r\n        // Threshold to distinguish typing from bulk operations\r\n        // Typing typically involves small changes (1-5 chars at a time)\r\n        // Paste/format/git operations involve larger changes\r\n        const BULK_CHAR_THRESHOLD = 10;\r\n        const BULK_LINE_THRESHOLD = 3;\r\n\r\n        for (const change of event.contentChanges) {\r\n            const textLength = change.text.length;\r\n            const deletedLength = change.rangeLength;\r\n            \r\n            // Count characters (always track these)\r\n            charsAdded += textLength;\r\n            charsDeleted += deletedLength;\r\n\r\n            // Count lines\r\n            const newLines = (change.text.match(/\\n/g) || []).length;\r\n            const deletedLines = change.range.end.line - change.range.start.line;\r\n\r\n            // Detect if this is a bulk operation (paste, format, git merge, etc.)\r\n            const isBulkOperation = \r\n                textLength > BULK_CHAR_THRESHOLD || \r\n                deletedLength > BULK_CHAR_THRESHOLD ||\r\n                newLines > BULK_LINE_THRESHOLD ||\r\n                deletedLines > BULK_LINE_THRESHOLD;\r\n\r\n            if (isBulkOperation) {\r\n                // Track bulk operations separately - these are NOT keystrokes\r\n                // Could be paste, auto-format, git operations, find-replace, etc.\r\n                linesAddedBulk += newLines;\r\n                linesDeletedBulk += deletedLines;\r\n                // No keystrokes for bulk operations\r\n            } else {\r\n                // This looks like actual typing\r\n                linesAdded += newLines;\r\n                linesDeleted += deletedLines;\r\n                \r\n                // Count keystrokes more accurately:\r\n                // - Empty text with deletion = backspace/delete key (1 keystroke)\r\n                // - Single char = 1 keystroke\r\n                // - Small multi-char (autocomplete acceptance) = 1 keystroke\r\n                if (textLength === 0 && deletedLength > 0) {\r\n                    // Backspace or delete key\r\n                    keystrokes += 1;\r\n                } else if (textLength > 0) {\r\n                    // Typing or small autocomplete\r\n                    keystrokes += 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Only save metrics if there's something to track\r\n        if (keystrokes > 0 || charsAdded > 0 || charsDeleted > 0 || \r\n            linesAdded > 0 || linesDeleted > 0 || linesAddedBulk > 0 || linesDeletedBulk > 0) {\r\n            this.storage.addMetrics(this.projectId, {\r\n                linesAdded,\r\n                linesDeleted,\r\n                linesAddedBulk,\r\n                linesDeletedBulk,\r\n                charactersAdded: charsAdded,\r\n                charactersDeleted: charsDeleted,\r\n                keystrokes\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Tick function called every second\r\n     */\r\n    tick() {\r\n        if (!this.isTracking) {\r\n            return;\r\n        }\r\n\r\n        const now = Date.now();\r\n        const timeSinceActivity = now - this.lastActivity;\r\n\r\n        // Check for AFK\r\n        if (timeSinceActivity >= this.afkThreshold) {\r\n            if (!this.isAfk) {\r\n                this.isAfk = true;\r\n                \r\n                // Finalize current session\r\n                this.storage.updateLastSession(\r\n                    this.projectId,\r\n                    this.lastActivity,\r\n                    this.currentSessionTime\r\n                );\r\n\r\n                if (this.onAfkChangeCallback) {\r\n                    this.onAfkChangeCallback(true);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Add time if not AFK\r\n        if (!this.isAfk) {\r\n            this.currentSessionTime += 1000;\r\n            this.storage.addTime(this.projectId, 1000);\r\n            \r\n            // Update session\r\n            this.storage.updateLastSession(\r\n                this.projectId,\r\n                now,\r\n                this.currentSessionTime\r\n            );\r\n\r\n            if (this.onTimeUpdateCallback) {\r\n                this.onTimeUpdateCallback(this.currentSessionTime);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set callback for time updates\r\n     * @param {(time: number) => void} callback \r\n     */\r\n    onTimeUpdate(callback) {\r\n        this.onTimeUpdateCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Set callback for AFK status changes\r\n     * @param {(isAfk: boolean) => void} callback \r\n     */\r\n    onAfkChange(callback) {\r\n        this.onAfkChangeCallback = callback;\r\n    }\r\n\r\n    /**\r\n     * Get current session time\r\n     * @returns {number}\r\n     */\r\n    getCurrentSessionTime() {\r\n        return this.currentSessionTime;\r\n    }\r\n\r\n    /**\r\n     * Get today's total time for current project\r\n     * @returns {number}\r\n     */\r\n    getTodayTime() {\r\n        const stats = this.storage.getProjectStats(this.projectId);\r\n        const startOfDay = new Date();\r\n        startOfDay.setHours(0, 0, 0, 0);\r\n        const startTimestamp = startOfDay.getTime();\r\n        const now = Date.now();\r\n\r\n        let todayTime = 0;\r\n        for (const session of stats.sessions) {\r\n            if (session.startTime >= startTimestamp) {\r\n                // Session started today\r\n                todayTime += session.duration;\r\n            } else if (session.endTime > startTimestamp) {\r\n                // Session spans midnight\r\n                todayTime += session.endTime - startTimestamp;\r\n            }\r\n        }\r\n\r\n        return todayTime;\r\n    }\r\n\r\n    /**\r\n     * Check if currently tracking\r\n     * @returns {boolean}\r\n     */\r\n    isCurrentlyTracking() {\r\n        return this.isTracking && !this.isAfk;\r\n    }\r\n\r\n    /**\r\n     * Get current project ID\r\n     * @returns {string}\r\n     */\r\n    getProjectId() {\r\n        return this.projectId;\r\n    }\r\n\r\n    /**\r\n     * Dispose the tracker\r\n     */\r\n    dispose() {\r\n        this.stop();\r\n        this.disposeActivityListeners();\r\n    }\r\n}\r\n\r\nmodule.exports = { Tracker };\r\n","/**\r\n * @typedef {Object} ProjectStats\r\n * @property {number} totalTime - Total active time in milliseconds\r\n * @property {number} linesAdded - Total lines added (typed)\r\n * @property {number} linesDeleted - Total lines deleted (typed)\r\n * @property {number} linesAddedBulk - Total lines added via bulk operations (paste, format, git)\r\n * @property {number} linesDeletedBulk - Total lines deleted via bulk operations\r\n * @property {number} charactersAdded - Total characters added\r\n * @property {number} charactersDeleted - Total characters deleted\r\n * @property {number} keystrokes - Total keystrokes (actual key presses, not pasted chars)\r\n * @property {Session[]} sessions - Array of work sessions\r\n * @property {number} lastActive - Last active timestamp\r\n */\r\n\r\n/**\r\n * @typedef {Object} Session\r\n * @property {number} startTime - Session start timestamp\r\n * @property {number} endTime - Session end timestamp\r\n * @property {number} duration - Session duration in milliseconds\r\n */\r\n\r\n/**\r\n * @typedef {Object} StorageData\r\n * @property {Object.<string, ProjectStats>} projects - Map of project paths to stats\r\n * @property {number} totalTimeAllProjects - Total time across all projects\r\n * @property {number} totalKeystrokes - Total keystrokes across all projects\r\n */\r\n\r\n/**\r\n * Creates a new empty ProjectStats object\r\n * @returns {ProjectStats}\r\n */\r\nfunction createEmptyProjectStats() {\r\n    return {\r\n        totalTime: 0,\r\n        linesAdded: 0,\r\n        linesDeleted: 0,\r\n        linesAddedBulk: 0,\r\n        linesDeletedBulk: 0,\r\n        charactersAdded: 0,\r\n        charactersDeleted: 0,\r\n        keystrokes: 0,\r\n        sessions: [],\r\n        lastActive: 0\r\n    };\r\n}\r\n\r\n/**\r\n * Creates a new empty StorageData object\r\n * @returns {StorageData}\r\n */\r\nfunction createEmptyStorageData() {\r\n    return {\r\n        projects: {},\r\n        totalTimeAllProjects: 0,\r\n        totalKeystrokes: 0\r\n    };\r\n}\r\n\r\nmodule.exports = {\r\n    createEmptyProjectStats,\r\n    createEmptyStorageData\r\n};\r\n","module.exports = require(\"vscode\");","const vscode = require('vscode');\n\n/**\n * Format milliseconds to HH:MM:SS string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Formatted time string\n */\nfunction formatTime(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format milliseconds to human readable string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Human readable time string\n */\nfunction formatTimeHuman(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    const parts = [];\n    if (hours > 0) parts.push(`${hours}h`);\n    if (minutes > 0) parts.push(`${minutes}m`);\n    if (seconds > 0 || parts.length === 0) parts.push(`${seconds}s`);\n    \n    return parts.join(' ');\n}\n\n/**\n * Get project identifier from workspace\n * @returns {string} Project identifier\n */\nfunction getProjectId() {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    \n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        return 'unknown-project';\n    }\n    \n    // Use workspace name if available, otherwise use first folder path\n    const workspaceName = vscode.workspace.name;\n    if (workspaceName) {\n        return workspaceName;\n    }\n    \n    return workspaceFolders[0].uri.fsPath;\n}\n\n/**\n * Get start of today in milliseconds\n * @returns {number} Timestamp of start of today\n */\nfunction getStartOfDay() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\n}\n\n/**\n * Get start of week in milliseconds (Monday)\n * @returns {number} Timestamp of start of week\n */\nfunction getStartOfWeek() {\n    const now = new Date();\n    const day = now.getDay();\n    const diff = now.getDate() - day + (day === 0 ? -6 : 1);\n    return new Date(now.getFullYear(), now.getMonth(), diff).getTime();\n}\n\n/**\n * Get start of month in milliseconds\n * @returns {number} Timestamp of start of month\n */\nfunction getStartOfMonth() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), 1).getTime();\n}\n\n/**\n * Check if a session is within a time range\n * @param {{ startTime: number, endTime: number }} session - Session object\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {boolean} True if session overlaps with range\n */\nfunction isSessionInRange(session, startRange, endRange) {\n    return session.startTime < endRange && session.endTime > startRange;\n}\n\n/**\n * Calculate time spent in a range from sessions\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {number} Time spent in range in milliseconds\n */\nfunction getTimeInRange(sessions, startRange, endRange) {\n    let total = 0;\n    \n    for (const session of sessions) {\n        if (isSessionInRange(session, startRange, endRange)) {\n            const overlapStart = Math.max(session.startTime, startRange);\n            const overlapEnd = Math.min(session.endTime, endRange);\n            total += overlapEnd - overlapStart;\n        }\n    }\n    \n    return total;\n}\n\n/**\n * Get daily breakdown for the last N days\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} days - Number of days to include\n * @returns {Array<{ date: string, time: number }>} Daily breakdown\n */\nfunction getDailyBreakdown(sessions, days = 7) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = days - 1; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - i);\n        const startOfDay = date.getTime();\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\n        \n        result.push({\n            date: date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),\n            time: getTimeInRange(sessions, startOfDay, endOfDay)\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get weekly breakdown for the last N weeks\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} weeks - Number of weeks to include\n * @returns {Array<{ week: string, time: number }>} Weekly breakdown\n */\nfunction getWeeklyBreakdown(sessions, weeks = 4) {\n    const result = [];\n    const now = new Date();\n    const currentDay = now.getDay();\n    const diff = now.getDate() - currentDay + (currentDay === 0 ? -6 : 1);\n    \n    for (let i = weeks - 1; i >= 0; i--) {\n        const weekStart = new Date(now.getFullYear(), now.getMonth(), diff - (i * 7));\n        const weekEnd = new Date(weekStart.getTime() + 7 * 24 * 60 * 60 * 1000);\n        \n        result.push({\n            week: `Week of ${weekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`,\n            time: getTimeInRange(sessions, weekStart.getTime(), weekEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get monthly breakdown for the last N months\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} months - Number of months to include\n * @returns {Array<{ month: string, time: number }>} Monthly breakdown\n */\nfunction getMonthlyBreakdown(sessions, months = 6) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = months - 1; i >= 0; i--) {\n        const monthStart = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const monthEnd = new Date(now.getFullYear(), now.getMonth() - i + 1, 1);\n        \n        result.push({\n            month: monthStart.toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),\n            time: getTimeInRange(sessions, monthStart.getTime(), monthEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\nmodule.exports = {\n    formatTime,\n    formatTimeHuman,\n    getProjectId,\n    getStartOfDay,\n    getStartOfWeek,\n    getStartOfMonth,\n    isSessionInRange,\n    getTimeInRange,\n    getDailyBreakdown,\n    getWeeklyBreakdown,\n    getMonthlyBreakdown\n};\n","const vscode = require('vscode');\r\nconst { Storage } = require('./storage');\r\nconst { Tracker } = require('./tracker');\r\nconst { StatusBar } = require('./statusBar');\r\nconst { StatsWebView } = require('./webview');\r\n\r\n/** @type {Storage} */\r\nlet storage;\r\n/** @type {Tracker} */\r\nlet tracker;\r\n/** @type {StatusBar} */\r\nlet statusBar;\r\n/** @type {StatsWebView} */\r\nlet webview;\r\n\r\n/**\r\n * Activate the extension\r\n * @param {vscode.ExtensionContext} context \r\n */\r\nasync function activate(context) {\r\n    console.log('PUNCHCARD - Work Time Statistics is now active!');\r\n\r\n    // Initialize storage\r\n    storage = new Storage(context);\r\n    await storage.initialize();\r\n\r\n    // Initialize tracker\r\n    tracker = new Tracker(storage);\r\n    tracker.initialize();\r\n\r\n    // Initialize status bar\r\n    statusBar = new StatusBar(tracker);\r\n    statusBar.initialize();\r\n\r\n    // Initialize webview\r\n    webview = new StatsWebView(context, storage);\r\n\r\n    // Register commands\r\n    const showStatsCommand = vscode.commands.registerCommand('workTimer.showStats', () => {\r\n        webview.show();\r\n    });\r\n\r\n    const resetProjectCommand = vscode.commands.registerCommand('workTimer.resetProject', async () => {\r\n        const projectId = tracker.getProjectId();\r\n        const confirm = await vscode.window.showWarningMessage(\r\n            `Are you sure you want to reset statistics for \"${projectId}\"?`,\r\n            { modal: true },\r\n            'Yes, Reset'\r\n        );\r\n        if (confirm === 'Yes, Reset') {\r\n            await storage.resetProject(projectId);\r\n            vscode.window.showInformationMessage(`Statistics for \"${projectId}\" have been reset.`);\r\n        }\r\n    });\r\n\r\n    const resetAllCommand = vscode.commands.registerCommand('workTimer.resetAll', async () => {\r\n        const confirm = await vscode.window.showWarningMessage(\r\n            'Are you sure you want to reset ALL statistics? This cannot be undone.',\r\n            { modal: true },\r\n            'Yes, Reset All'\r\n        );\r\n        if (confirm === 'Yes, Reset All') {\r\n            await storage.resetAll();\r\n            vscode.window.showInformationMessage('All statistics have been reset.');\r\n        }\r\n    });\r\n\r\n    const exportDataCommand = vscode.commands.registerCommand('workTimer.exportData', async () => {\r\n        const data = storage.getAllData();\r\n        const jsonContent = JSON.stringify(data, null, 2);\r\n        \r\n        const uri = await vscode.window.showSaveDialog({\r\n            defaultUri: vscode.Uri.file('punchcard-stats.json'),\r\n            filters: {\r\n                'JSON Files': ['json']\r\n            }\r\n        });\r\n\r\n        if (uri) {\r\n            await vscode.workspace.fs.writeFile(uri, Buffer.from(jsonContent, 'utf8'));\r\n            vscode.window.showInformationMessage(`Statistics exported to ${uri.fsPath}`);\r\n        }\r\n    });\r\n\r\n    const importDataCommand = vscode.commands.registerCommand('workTimer.importData', async () => {\r\n        const uri = await vscode.window.showOpenDialog({\r\n            canSelectFiles: true,\r\n            canSelectFolders: false,\r\n            canSelectMany: false,\r\n            filters: {\r\n                'JSON Files': ['json']\r\n            }\r\n        });\r\n\r\n        if (uri && uri[0]) {\r\n            try {\r\n                const fileContent = await vscode.workspace.fs.readFile(uri[0]);\r\n                const importedData = JSON.parse(Buffer.from(fileContent).toString('utf8'));\r\n                \r\n                if (importedData && importedData.projects) {\r\n                    const confirm = await vscode.window.showWarningMessage(\r\n                        'This will merge imported data with existing data. Continue?',\r\n                        { modal: true },\r\n                        'Yes, Import'\r\n                    );\r\n                    \r\n                    if (confirm === 'Yes, Import') {\r\n                        await storage.importData(importedData);\r\n                        vscode.window.showInformationMessage('Data imported successfully!');\r\n                    }\r\n                } else {\r\n                    vscode.window.showErrorMessage('Invalid data format. Expected a valid PUNCHCARD export file.');\r\n                }\r\n            } catch (error) {\r\n                vscode.window.showErrorMessage(`Failed to import data: ${error.message}`);\r\n            }\r\n        }\r\n    });\r\n\r\n    const checkSyncCommand = vscode.commands.registerCommand('workTimer.checkSync', async () => {\r\n        const data = storage.getAllData();\r\n        const projectCount = Object.keys(data.projects).length;\r\n        const totalTime = data.totalTimeAllProjects;\r\n        \r\n        const hours = Math.floor(totalTime / 3600000);\r\n        const minutes = Math.floor((totalTime % 3600000) / 60000);\r\n        \r\n        const message = [\r\n            'üìä PUNCHCARD Sync Status',\r\n            '',\r\n            `Projects tracked: ${projectCount}`,\r\n            `Total time: ${hours}h ${minutes}m`,\r\n            `Total keystrokes: ${data.totalKeystrokes}`,\r\n            '',\r\n            '‚öôÔ∏è For sync to work:',\r\n            '1. Settings Sync must be ON (Ctrl+Shift+P ‚Üí \"Settings Sync: Turn On\")',\r\n            '2. \"UI State\" must be checked in sync settings',\r\n            '3. Same Microsoft/GitHub account on both machines',\r\n            '4. Run \"Settings Sync: Sync Now\" to force sync',\r\n            '',\r\n            'Note: Sync may take a few minutes. Reload VS Code after syncing.'\r\n        ].join('\\n');\r\n        \r\n        vscode.window.showInformationMessage(message, { modal: true });\r\n    });\r\n\r\n    // Add commands to subscriptions\r\n    context.subscriptions.push(\r\n        showStatsCommand,\r\n        resetProjectCommand,\r\n        resetAllCommand,\r\n        exportDataCommand,\r\n        importDataCommand,\r\n        checkSyncCommand\r\n    );\r\n\r\n    // Add disposables\r\n    context.subscriptions.push({\r\n        dispose: () => {\r\n            tracker.dispose();\r\n            statusBar.dispose();\r\n            webview.dispose();\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Deactivate the extension\r\n */\r\nfunction deactivate() {\r\n    if (tracker) {\r\n        tracker.dispose();\r\n    }\r\n    if (statusBar) {\r\n        statusBar.dispose();\r\n    }\r\n    if (webview) {\r\n        webview.dispose();\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    activate,\r\n    deactivate\r\n};\r\n","const vscode = require('vscode');\nconst { formatTime } = require('./utils');\n\n/**\n * Status bar item manager\n */\nclass StatusBar {\n    /**\n     * @param {import('./tracker').Tracker} tracker \n     */\n    constructor(tracker) {\n        this.tracker = tracker;\n        this.statusBarItem = vscode.window.createStatusBarItem(\n            vscode.StatusBarAlignment.Left,\n            100\n        );\n        this.statusBarItem.command = 'workTimer.showStats';\n        this.statusBarItem.tooltip = 'Click to view work time statistics';\n        this.updateInterval = null;\n    }\n\n    /**\n     * Initialize the status bar\n     */\n    initialize() {\n        this.statusBarItem.show();\n        this.update();\n\n        // Update every second\n        this.updateInterval = setInterval(() => this.update(), 1000);\n\n        // Listen for time updates from tracker\n        this.tracker.onTimeUpdate(() => this.update());\n        this.tracker.onAfkChange((isAfk) => this.updateAfkStatus(isAfk));\n    }\n\n    /**\n     * Update the status bar display\n     */\n    update() {\n        const sessionTime = this.tracker.getCurrentSessionTime();\n        const todayTime = this.tracker.getTodayTime();\n        const isTracking = this.tracker.isCurrentlyTracking();\n\n        const sessionStr = formatTime(sessionTime);\n        const todayStr = formatTime(todayTime);\n\n        const icon = isTracking ? '$(clock)' : '$(debug-pause)';\n        this.statusBarItem.text = `${icon} ${sessionStr} | Today: ${todayStr}`;\n        \n        if (!isTracking) {\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n        }\n    }\n\n    /**\n     * Update AFK status display\n     * @param {boolean} isAfk \n     */\n    updateAfkStatus(isAfk) {\n        if (isAfk) {\n            this.statusBarItem.text = `$(debug-pause) AFK - ${this.statusBarItem.text.split(' | ')[1] || ''}`;\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n            this.update();\n        }\n    }\n\n    /**\n     * Dispose the status bar\n     */\n    dispose() {\n        if (this.updateInterval) {\n            clearInterval(this.updateInterval);\n            this.updateInterval = null;\n        }\n        this.statusBarItem.dispose();\n    }\n}\n\nmodule.exports = { StatusBar };\n","const { createEmptyProjectStats, createEmptyStorageData } = require('./types');\r\n\r\nconst STORAGE_KEY = 'punchcard-work-stats';\r\nconst SYNC_KEYS = [STORAGE_KEY];\r\n\r\n/**\r\n * Storage manager for work time statistics\r\n * Uses VS Code's globalState with sync enabled for cross-device synchronization\r\n */\r\nclass Storage {\r\n    /**\r\n     * @param {import('vscode').ExtensionContext} context \r\n     */\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.data = createEmptyStorageData();\r\n        this.initialized = false;\r\n        this.syncCheckTimeout = null;\r\n    }\r\n\r\n    /**\r\n     * Initialize storage and set up sync\r\n     */\r\n    async initialize() {\r\n        // Enable sync for our storage key - this tells VS Code to sync this key\r\n        // when Settings Sync is enabled and \"UI State\" sync is turned on\r\n        this.context.globalState.setKeysForSync(SYNC_KEYS);\r\n        \r\n        // Load existing data\r\n        await this.load();\r\n        this.initialized = true;\r\n        \r\n        console.log('PUNCHCARD: Storage initialized');\r\n        console.log('PUNCHCARD: Sync keys registered:', SYNC_KEYS);\r\n        console.log('PUNCHCARD: Data loaded, projects:', Object.keys(this.data.projects).length);\r\n        \r\n        // Schedule a delayed reload to catch any synced data that arrives after startup\r\n        // This helps with the race condition where local data loads before sync completes\r\n        this.scheduleSyncCheck();\r\n    }\r\n\r\n    /**\r\n     * Schedule a check for synced data after a delay\r\n     * This helps catch data that syncs after the initial load\r\n     */\r\n    scheduleSyncCheck() {\r\n        // Check after 5 seconds, 15 seconds, and 30 seconds\r\n        const delays = [5000, 15000, 30000];\r\n        \r\n        delays.forEach(delay => {\r\n            setTimeout(async () => {\r\n                await this.checkForSyncedData();\r\n            }, delay);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if synced data has arrived and merge it with current data\r\n     */\r\n    async checkForSyncedData() {\r\n        const stored = this.context.globalState.get(STORAGE_KEY);\r\n        \r\n        if (!stored || !stored.projects) {\r\n            return;\r\n        }\r\n        \r\n        // Check if the synced data has more data than current\r\n        const storedProjectCount = Object.keys(stored.projects).length;\r\n        const currentProjectCount = Object.keys(this.data.projects).length;\r\n        const storedTotalTime = stored.totalTimeAllProjects || 0;\r\n        const currentTotalTime = this.data.totalTimeAllProjects || 0;\r\n        \r\n        // If synced data appears to have more/different data, merge it\r\n        if (storedProjectCount > currentProjectCount || storedTotalTime > currentTotalTime) {\r\n            console.log('PUNCHCARD: Detected synced data, merging...');\r\n            this.mergeWithSyncedData(stored);\r\n            await this.save();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Merge synced data with current data, taking larger values\r\n     * @param {import('./types').StorageData} syncedData\r\n     */\r\n    mergeWithSyncedData(syncedData) {\r\n        for (const projectId in syncedData.projects) {\r\n            const syncedStats = syncedData.projects[projectId];\r\n            \r\n            if (!this.data.projects[projectId]) {\r\n                // New project from sync\r\n                this.data.projects[projectId] = syncedStats;\r\n            } else {\r\n                // Merge: take larger values (assumes data only grows)\r\n                const currentStats = this.data.projects[projectId];\r\n                this.data.projects[projectId] = {\r\n                    totalTime: Math.max(currentStats.totalTime || 0, syncedStats.totalTime || 0),\r\n                    linesAdded: Math.max(currentStats.linesAdded || 0, syncedStats.linesAdded || 0),\r\n                    linesDeleted: Math.max(currentStats.linesDeleted || 0, syncedStats.linesDeleted || 0),\r\n                    linesAddedBulk: Math.max(currentStats.linesAddedBulk || 0, syncedStats.linesAddedBulk || 0),\r\n                    linesDeletedBulk: Math.max(currentStats.linesDeletedBulk || 0, syncedStats.linesDeletedBulk || 0),\r\n                    charactersAdded: Math.max(currentStats.charactersAdded || 0, syncedStats.charactersAdded || 0),\r\n                    charactersDeleted: Math.max(currentStats.charactersDeleted || 0, syncedStats.charactersDeleted || 0),\r\n                    keystrokes: Math.max(currentStats.keystrokes || 0, syncedStats.keystrokes || 0),\r\n                    sessions: this.mergeSessions(currentStats.sessions || [], syncedStats.sessions || []),\r\n                    lastActive: Math.max(currentStats.lastActive || 0, syncedStats.lastActive || 0)\r\n                };\r\n            }\r\n        }\r\n        \r\n        // Recalculate totals\r\n        this.recalculateTotals();\r\n    }\r\n\r\n    /**\r\n     * Merge session arrays, avoiding duplicates based on startTime\r\n     */\r\n    mergeSessions(currentSessions, syncedSessions) {\r\n        const sessionMap = new Map();\r\n        \r\n        // Add current sessions\r\n        for (const session of currentSessions) {\r\n            sessionMap.set(session.startTime, session);\r\n        }\r\n        \r\n        // Add synced sessions (won't duplicate if same startTime)\r\n        for (const session of syncedSessions) {\r\n            if (!sessionMap.has(session.startTime)) {\r\n                sessionMap.set(session.startTime, session);\r\n            }\r\n        }\r\n        \r\n        // Return sorted by startTime\r\n        return Array.from(sessionMap.values()).sort((a, b) => a.startTime - b.startTime);\r\n    }\r\n\r\n    /**\r\n     * Recalculate total values from all projects\r\n     */\r\n    recalculateTotals() {\r\n        this.data.totalTimeAllProjects = 0;\r\n        this.data.totalKeystrokes = 0;\r\n        \r\n        for (const projectId in this.data.projects) {\r\n            this.data.totalTimeAllProjects += this.data.projects[projectId].totalTime || 0;\r\n            this.data.totalKeystrokes += this.data.projects[projectId].keystrokes || 0;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load data from global state\r\n     */\r\n    async load() {\r\n        const stored = this.context.globalState.get(STORAGE_KEY);\r\n        \r\n        if (stored) {\r\n            this.data = {\r\n                projects: stored.projects || {},\r\n                totalTimeAllProjects: stored.totalTimeAllProjects || 0,\r\n                totalKeystrokes: stored.totalKeystrokes || 0\r\n            };\r\n            console.log('PUNCHCARD: Loaded existing data from globalState');\r\n        } else {\r\n            this.data = createEmptyStorageData();\r\n            console.log('PUNCHCARD: No existing data, starting fresh');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save data to global state\r\n     */\r\n    async save() {\r\n        await this.context.globalState.update(STORAGE_KEY, this.data);\r\n    }\r\n\r\n    /**\r\n     * Get stats for a specific project\r\n     * @param {string} projectId \r\n     * @returns {import('./types').ProjectStats}\r\n     */\r\n    getProjectStats(projectId) {\r\n        if (!this.data.projects[projectId]) {\r\n            this.data.projects[projectId] = createEmptyProjectStats();\r\n        }\r\n        return this.data.projects[projectId];\r\n    }\r\n\r\n    /**\r\n     * Update stats for a project\r\n     * @param {string} projectId \r\n     * @param {Partial<import('./types').ProjectStats>} updates \r\n     */\r\n    async updateProjectStats(projectId, updates) {\r\n        const stats = this.getProjectStats(projectId);\r\n        Object.assign(stats, updates);\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Add time to a project\r\n     * @param {string} projectId \r\n     * @param {number} timeMs \r\n     */\r\n    async addTime(projectId, timeMs) {\r\n        const stats = this.getProjectStats(projectId);\r\n        stats.totalTime += timeMs;\r\n        stats.lastActive = Date.now();\r\n        this.data.totalTimeAllProjects += timeMs;\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Add a completed session\r\n     * @param {string} projectId \r\n     * @param {import('./types').Session} session \r\n     */\r\n    async addSession(projectId, session) {\r\n        const stats = this.getProjectStats(projectId);\r\n        stats.sessions.push(session);\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Update the last session end time\r\n     * @param {string} projectId \r\n     * @param {number} endTime \r\n     * @param {number} duration \r\n     */\r\n    async updateLastSession(projectId, endTime, duration) {\r\n        const stats = this.getProjectStats(projectId);\r\n        if (stats.sessions.length > 0) {\r\n            const lastSession = stats.sessions[stats.sessions.length - 1];\r\n            lastSession.endTime = endTime;\r\n            lastSession.duration = duration;\r\n            await this.save();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add metrics to a project\r\n     * @param {string} projectId \r\n     * @param {{ linesAdded?: number, linesDeleted?: number, linesAddedBulk?: number, linesDeletedBulk?: number, charactersAdded?: number, charactersDeleted?: number, keystrokes?: number }} metrics \r\n     */\r\n    async addMetrics(projectId, metrics) {\r\n        const stats = this.getProjectStats(projectId);\r\n        \r\n        if (metrics.linesAdded) {\r\n            stats.linesAdded += metrics.linesAdded;\r\n        }\r\n        if (metrics.linesDeleted) {\r\n            stats.linesDeleted += metrics.linesDeleted;\r\n        }\r\n        if (metrics.linesAddedBulk) {\r\n            // Initialize if not present (for backward compatibility)\r\n            if (typeof stats.linesAddedBulk !== 'number') {\r\n                stats.linesAddedBulk = 0;\r\n            }\r\n            stats.linesAddedBulk += metrics.linesAddedBulk;\r\n        }\r\n        if (metrics.linesDeletedBulk) {\r\n            // Initialize if not present (for backward compatibility)\r\n            if (typeof stats.linesDeletedBulk !== 'number') {\r\n                stats.linesDeletedBulk = 0;\r\n            }\r\n            stats.linesDeletedBulk += metrics.linesDeletedBulk;\r\n        }\r\n        if (metrics.charactersAdded) {\r\n            stats.charactersAdded += metrics.charactersAdded;\r\n        }\r\n        if (metrics.charactersDeleted) {\r\n            stats.charactersDeleted += metrics.charactersDeleted;\r\n        }\r\n        if (metrics.keystrokes) {\r\n            stats.keystrokes += metrics.keystrokes;\r\n            this.data.totalKeystrokes += metrics.keystrokes;\r\n        }\r\n        \r\n        stats.lastActive = Date.now();\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Reset a specific stat for a project\r\n     * @param {string} projectId \r\n     * @param {string} statName - The stat to reset (keystrokes, linesAdded, linesDeleted, linesAddedBulk, linesDeletedBulk, charactersAdded, charactersDeleted, totalTime, sessions)\r\n     */\r\n    async resetProjectStat(projectId, statName) {\r\n        if (!this.data.projects[projectId]) {\r\n            return;\r\n        }\r\n        \r\n        const stats = this.data.projects[projectId];\r\n        \r\n        switch (statName) {\r\n            case 'keystrokes':\r\n                this.data.totalKeystrokes -= stats.keystrokes || 0;\r\n                stats.keystrokes = 0;\r\n                break;\r\n            case 'linesAdded':\r\n                stats.linesAdded = 0;\r\n                break;\r\n            case 'linesDeleted':\r\n                stats.linesDeleted = 0;\r\n                break;\r\n            case 'linesAddedBulk':\r\n                stats.linesAddedBulk = 0;\r\n                break;\r\n            case 'linesDeletedBulk':\r\n                stats.linesDeletedBulk = 0;\r\n                break;\r\n            case 'charactersAdded':\r\n                stats.charactersAdded = 0;\r\n                break;\r\n            case 'charactersDeleted':\r\n                stats.charactersDeleted = 0;\r\n                break;\r\n            case 'totalTime':\r\n                this.data.totalTimeAllProjects -= stats.totalTime || 0;\r\n                stats.totalTime = 0;\r\n                break;\r\n            case 'sessions':\r\n                stats.sessions = [];\r\n                break;\r\n            case 'allLines':\r\n                stats.linesAdded = 0;\r\n                stats.linesDeleted = 0;\r\n                stats.linesAddedBulk = 0;\r\n                stats.linesDeletedBulk = 0;\r\n                break;\r\n            case 'allChars':\r\n                stats.charactersAdded = 0;\r\n                stats.charactersDeleted = 0;\r\n                break;\r\n        }\r\n        \r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Reset a specific stat across ALL projects (global reset)\r\n     * @param {string} statName - The stat to reset globally\r\n     */\r\n    async resetGlobalStat(statName) {\r\n        for (const projectId in this.data.projects) {\r\n            const stats = this.data.projects[projectId];\r\n            \r\n            switch (statName) {\r\n                case 'keystrokes':\r\n                    stats.keystrokes = 0;\r\n                    break;\r\n                case 'linesAdded':\r\n                    stats.linesAdded = 0;\r\n                    break;\r\n                case 'linesDeleted':\r\n                    stats.linesDeleted = 0;\r\n                    break;\r\n                case 'linesAddedBulk':\r\n                    stats.linesAddedBulk = 0;\r\n                    break;\r\n                case 'linesDeletedBulk':\r\n                    stats.linesDeletedBulk = 0;\r\n                    break;\r\n                case 'charactersAdded':\r\n                    stats.charactersAdded = 0;\r\n                    break;\r\n                case 'charactersDeleted':\r\n                    stats.charactersDeleted = 0;\r\n                    break;\r\n                case 'totalTime':\r\n                    stats.totalTime = 0;\r\n                    break;\r\n                case 'sessions':\r\n                    stats.sessions = [];\r\n                    break;\r\n            }\r\n        }\r\n        \r\n        // Update totals\r\n        if (statName === 'keystrokes') {\r\n            this.data.totalKeystrokes = 0;\r\n        }\r\n        if (statName === 'totalTime') {\r\n            this.data.totalTimeAllProjects = 0;\r\n        }\r\n        \r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Reset stats for a specific project\r\n     * @param {string} projectId \r\n     */\r\n    async resetProject(projectId) {\r\n        if (this.data.projects[projectId]) {\r\n            const oldStats = this.data.projects[projectId];\r\n            this.data.totalTimeAllProjects -= oldStats.totalTime;\r\n            this.data.totalKeystrokes -= oldStats.keystrokes;\r\n            delete this.data.projects[projectId];\r\n            await this.save();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reset all statistics\r\n     */\r\n    async resetAll() {\r\n        this.data = createEmptyStorageData();\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Import data from an exported JSON file (merges with existing data)\r\n     * @param {import('./types').StorageData} importedData \r\n     */\r\n    async importData(importedData) {\r\n        if (!importedData || !importedData.projects) {\r\n            throw new Error('Invalid data format');\r\n        }\r\n\r\n        // Merge imported data with existing data\r\n        for (const projectId in importedData.projects) {\r\n            const importedStats = importedData.projects[projectId];\r\n            \r\n            if (!this.data.projects[projectId]) {\r\n                // New project, add it directly\r\n                this.data.projects[projectId] = importedStats;\r\n            } else {\r\n                // Existing project, merge by taking the larger values\r\n                const existingStats = this.data.projects[projectId];\r\n                this.data.projects[projectId] = {\r\n                    totalTime: Math.max(existingStats.totalTime || 0, importedStats.totalTime || 0),\r\n                    linesAdded: Math.max(existingStats.linesAdded || 0, importedStats.linesAdded || 0),\r\n                    linesDeleted: Math.max(existingStats.linesDeleted || 0, importedStats.linesDeleted || 0),\r\n                    linesAddedBulk: Math.max(existingStats.linesAddedBulk || 0, importedStats.linesAddedBulk || 0),\r\n                    linesDeletedBulk: Math.max(existingStats.linesDeletedBulk || 0, importedStats.linesDeletedBulk || 0),\r\n                    charactersAdded: Math.max(existingStats.charactersAdded || 0, importedStats.charactersAdded || 0),\r\n                    charactersDeleted: Math.max(existingStats.charactersDeleted || 0, importedStats.charactersDeleted || 0),\r\n                    keystrokes: Math.max(existingStats.keystrokes || 0, importedStats.keystrokes || 0),\r\n                    sessions: [...(existingStats.sessions || []), ...(importedStats.sessions || [])],\r\n                    lastActive: Math.max(existingStats.lastActive || 0, importedStats.lastActive || 0)\r\n                };\r\n            }\r\n        }\r\n\r\n        // Recalculate totals\r\n        this.data.totalTimeAllProjects = 0;\r\n        this.data.totalKeystrokes = 0;\r\n        for (const projectId in this.data.projects) {\r\n            this.data.totalTimeAllProjects += this.data.projects[projectId].totalTime || 0;\r\n            this.data.totalKeystrokes += this.data.projects[projectId].keystrokes || 0;\r\n        }\r\n\r\n        await this.save();\r\n    }\r\n\r\n    /**\r\n     * Get all data for export\r\n     * @returns {import('./types').StorageData}\r\n     */\r\n    getAllData() {\r\n        return { ...this.data };\r\n    }\r\n\r\n    /**\r\n     * Get summary statistics\r\n     */\r\n    getSummary() {\r\n        const projectCount = Object.keys(this.data.projects).length;\r\n        let totalSessions = 0;\r\n        let totalLinesAdded = 0;\r\n        let totalLinesDeleted = 0;\r\n        let totalLinesAddedBulk = 0;\r\n        let totalLinesDeletedBulk = 0;\r\n        let totalCharsAdded = 0;\r\n        let totalCharsDeleted = 0;\r\n\r\n        for (const projectId in this.data.projects) {\r\n            const stats = this.data.projects[projectId];\r\n            totalSessions += stats.sessions.length;\r\n            totalLinesAdded += stats.linesAdded || 0;\r\n            totalLinesDeleted += stats.linesDeleted || 0;\r\n            totalLinesAddedBulk += stats.linesAddedBulk || 0;\r\n            totalLinesDeletedBulk += stats.linesDeletedBulk || 0;\r\n            totalCharsAdded += stats.charactersAdded || 0;\r\n            totalCharsDeleted += stats.charactersDeleted || 0;\r\n        }\r\n\r\n        return {\r\n            projectCount,\r\n            totalTime: this.data.totalTimeAllProjects,\r\n            totalKeystrokes: this.data.totalKeystrokes,\r\n            totalSessions,\r\n            totalLinesAdded,\r\n            totalLinesDeleted,\r\n            totalLinesAddedBulk,\r\n            totalLinesDeletedBulk,\r\n            totalCharsAdded,\r\n            totalCharsDeleted\r\n        };\r\n    }\r\n}\r\n\r\nmodule.exports = { Storage, STORAGE_KEY };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(497);\n"],"names":["vscode","formatTime","formatTimeHuman","getDailyBreakdown","getWeeklyBreakdown","getMonthlyBreakdown","getTimeInRange","getStartOfDay","module","exports","StatsWebView","constructor","context","storage","this","panel","show","reveal","ViewColumn","One","update","window","createWebviewPanel","enableScripts","retainContextWhenHidden","webview","html","getWebviewContent","onDidReceiveMessage","async","message","command","showWarningMessage","projectId","modal","resetProject","showInformationMessage","statLabel","resetProjectStat","statName","resetGlobalStat","undefined","subscriptions","onDidDispose","data","getAllData","summary","getSummary","projects","allSessions","push","sessions","dailyData","weeklyData","monthlyData","startOfDay","todayTime","totalTime","projectCount","totalSessions","formatNumber","totalKeystrokes","totalLinesAdded","totalLinesDeleted","totalLinesAddedBulk","totalCharsAdded","Object","keys","length","entries","map","stats","escapeHtml","keystrokes","linesAdded","linesDeleted","linesAddedBulk","charactersAdded","lastActive","Date","toLocaleDateString","join","JSON","stringify","name","time","num","toLocaleString","text","div","replace","m","dispose","getProjectId","createEmptyProjectStats","Tracker","isTracking","lastActivity","now","sessionStartTime","currentSessionTime","isAfk","afkThreshold","checkInterval","disposables","onTimeUpdateCallback","onAfkChangeCallback","initialize","loadConfig","workspace","onDidChangeConfiguration","e","affectsConfiguration","getConfiguration","get","start","config","registerActivityListeners","setInterval","tick","addSession","startTime","endTime","duration","stop","clearInterval","disposeActivityListeners","updateLastSession","onDidChangeTextDocument","onActivity","trackDocumentChanges","onDidChangeTextEditorSelection","onDidChangeTextEditorVisibleRanges","onDidChangeActiveTextEditor","disposable","wasAfk","event","contentChanges","charsAdded","charsDeleted","linesDeletedBulk","change","textLength","deletedLength","rangeLength","newLines","match","deletedLines","range","end","line","addMetrics","charactersDeleted","addTime","onTimeUpdate","callback","onAfkChange","getCurrentSessionTime","getTodayTime","getProjectStats","setHours","startTimestamp","getTime","session","isCurrentlyTracking","createEmptyStorageData","totalTimeAllProjects","require","isSessionInRange","startRange","endRange","total","overlapStart","Math","max","min","ms","totalSeconds","floor","hours","minutes","seconds","toString","padStart","parts","workspaceFolders","uri","fsPath","getFullYear","getMonth","getDate","getStartOfWeek","day","getDay","diff","getStartOfMonth","days","result","i","date","endOfDay","weekday","month","weeks","currentDay","weekStart","weekEnd","week","months","monthStart","monthEnd","year","Storage","StatusBar","tracker","statusBar","activate","console","log","showStatsCommand","commands","registerCommand","resetProjectCommand","resetAllCommand","resetAll","exportDataCommand","jsonContent","showSaveDialog","defaultUri","Uri","file","filters","fs","writeFile","Buffer","from","importDataCommand","showOpenDialog","canSelectFiles","canSelectFolders","canSelectMany","fileContent","readFile","importedData","parse","importData","showErrorMessage","error","checkSyncCommand","deactivate","statusBarItem","createStatusBarItem","StatusBarAlignment","Left","tooltip","updateInterval","updateAfkStatus","sessionTime","sessionStr","todayStr","icon","backgroundColor","ThemeColor","split","STORAGE_KEY","SYNC_KEYS","initialized","syncCheckTimeout","globalState","setKeysForSync","load","scheduleSyncCheck","forEach","delay","setTimeout","checkForSyncedData","stored","storedProjectCount","currentProjectCount","storedTotalTime","currentTotalTime","mergeWithSyncedData","save","syncedData","syncedStats","currentStats","mergeSessions","recalculateTotals","currentSessions","syncedSessions","sessionMap","Map","set","has","Array","values","sort","a","b","updateProjectStats","updates","assign","timeMs","lastSession","metrics","oldStats","Error","importedStats","existingStats","totalLinesDeletedBulk","totalCharsDeleted","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"ignoreList":[],"sourceRoot":""}