{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://punchcard-work-time-statistics/./src/webview.js","webpack://punchcard-work-time-statistics/./src/tracker.js","webpack://punchcard-work-time-statistics/./src/types.js","webpack://punchcard-work-time-statistics/external commonjs \"vscode\"","webpack://punchcard-work-time-statistics/./src/utils.js","webpack://punchcard-work-time-statistics/./src/extension.js","webpack://punchcard-work-time-statistics/./src/statusBar.js","webpack://punchcard-work-time-statistics/./src/storage.js","webpack://punchcard-work-time-statistics/webpack/bootstrap","webpack://punchcard-work-time-statistics/webpack/startup"],"sourcesContent":["const vscode = require('vscode');\nconst { formatTime, formatTimeHuman, getDailyBreakdown, getWeeklyBreakdown, getMonthlyBreakdown, getTimeInRange, getStartOfDay } = require('./utils');\n\n/**\n * WebView panel for displaying statistics\n */\nclass StatsWebView {\n    /**\n     * @param {vscode.ExtensionContext} context \n     * @param {import('./storage').Storage} storage \n     */\n    constructor(context, storage) {\n        this.context = context;\n        this.storage = storage;\n        this.panel = null;\n    }\n\n    /**\n     * Show the statistics panel\n     */\n    show() {\n        if (this.panel) {\n            this.panel.reveal(vscode.ViewColumn.One);\n            this.update();\n            return;\n        }\n\n        this.panel = vscode.window.createWebviewPanel(\n            'workTimerStats',\n            'PUNCHCARD - Work Time Statistics',\n            vscode.ViewColumn.One,\n            {\n                enableScripts: true,\n                retainContextWhenHidden: true\n            }\n        );\n\n        this.panel.webview.html = this.getWebviewContent();\n\n        this.panel.webview.onDidReceiveMessage(\n            async (message) => {\n                switch (message.command) {\n                    case 'resetProject':\n                        const confirmReset = await vscode.window.showWarningMessage(\n                            `Are you sure you want to reset statistics for \"${message.projectId}\"?`,\n                            { modal: true },\n                            'Yes, Reset'\n                        );\n                        if (confirmReset === 'Yes, Reset') {\n                            await this.storage.resetProject(message.projectId);\n                            this.update();\n                            vscode.window.showInformationMessage(`Statistics for \"${message.projectId}\" have been reset.`);\n                        }\n                        break;\n                    case 'resetStat':\n                        const confirmStatReset = await vscode.window.showWarningMessage(\n                            `Are you sure you want to reset ${message.statLabel} for \"${message.projectId}\"?`,\n                            { modal: true },\n                            'Yes, Reset'\n                        );\n                        if (confirmStatReset === 'Yes, Reset') {\n                            await this.storage.resetProjectStat(message.projectId, message.statName);\n                            this.update();\n                            vscode.window.showInformationMessage(`${message.statLabel} for \"${message.projectId}\" has been reset.`);\n                        }\n                        break;\n                    case 'resetGlobalStat':\n                        const confirmGlobalReset = await vscode.window.showWarningMessage(\n                            `Are you sure you want to reset ${message.statLabel} for ALL projects?`,\n                            { modal: true },\n                            'Yes, Reset All'\n                        );\n                        if (confirmGlobalReset === 'Yes, Reset All') {\n                            await this.storage.resetGlobalStat(message.statName);\n                            this.update();\n                            vscode.window.showInformationMessage(`${message.statLabel} has been reset for all projects.`);\n                        }\n                        break;\n                    case 'refresh':\n                        this.update();\n                        break;\n                }\n            },\n            undefined,\n            this.context.subscriptions\n        );\n\n        this.panel.onDidDispose(\n            () => {\n                this.panel = null;\n            },\n            null,\n            this.context.subscriptions\n        );\n    }\n\n    /**\n     * Update the webview content\n     */\n    update() {\n        if (this.panel) {\n            this.panel.webview.html = this.getWebviewContent();\n        }\n    }\n\n    /**\n     * Get the HTML content for the webview\n     * @returns {string}\n     */\n    getWebviewContent() {\n        const data = this.storage.getAllData();\n        const summary = this.storage.getSummary();\n        const projects = data.projects;\n\n        // Prepare chart data\n        const allSessions = [];\n        for (const projectId in projects) {\n            allSessions.push(...projects[projectId].sessions);\n        }\n\n        const dailyData = getDailyBreakdown(allSessions, 7);\n        const weeklyData = getWeeklyBreakdown(allSessions, 4);\n        const monthlyData = getMonthlyBreakdown(allSessions, 6);\n\n        // Calculate today's time\n        const startOfDay = getStartOfDay();\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\n        const todayTime = getTimeInRange(allSessions, startOfDay, endOfDay);\n\n        return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>PUNCHCARD - Work Time Statistics</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n        :root {\n            --bg-color: var(--vscode-editor-background);\n            --text-color: var(--vscode-editor-foreground);\n            --border-color: var(--vscode-panel-border);\n            --card-bg: var(--vscode-editorWidget-background);\n            --accent-color: var(--vscode-button-background);\n            --accent-hover: var(--vscode-button-hoverBackground);\n            --danger-color: var(--vscode-errorForeground);\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: var(--vscode-font-family);\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            padding: 20px;\n            line-height: 1.6;\n        }\n\n        h1, h2, h3 {\n            margin-bottom: 15px;\n            font-weight: 600;\n        }\n\n        h1 {\n            font-size: 24px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        h1::before {\n            content: \"‚è±Ô∏è\";\n        }\n\n        .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 30px;\n            padding-bottom: 15px;\n            border-bottom: 1px solid var(--border-color);\n        }\n\n        .refresh-btn {\n            background-color: var(--accent-color);\n            color: var(--vscode-button-foreground);\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n        }\n\n        .refresh-btn:hover {\n            background-color: var(--accent-hover);\n        }\n\n        .summary-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 15px;\n            margin-bottom: 30px;\n        }\n\n        .summary-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            text-align: center;\n            position: relative;\n        }\n\n        .summary-card:hover .summary-reset-btn {\n            opacity: 1;\n        }\n\n        .summary-reset-btn {\n            position: absolute;\n            top: 5px;\n            right: 5px;\n            background: transparent;\n            border: none;\n            color: var(--danger-color);\n            cursor: pointer;\n            font-size: 10px;\n            padding: 2px 6px;\n            opacity: 0;\n            transition: opacity 0.2s;\n            border-radius: 3px;\n        }\n\n        .summary-reset-btn:hover {\n            background-color: var(--danger-color);\n            color: white;\n        }\n\n        .summary-card .value {\n            font-size: 28px;\n            font-weight: bold;\n            color: var(--accent-color);\n            margin-bottom: 5px;\n        }\n\n        .summary-card .label {\n            font-size: 12px;\n            opacity: 0.8;\n            text-transform: uppercase;\n        }\n\n        .charts-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .chart-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n        }\n\n        .chart-card h3 {\n            margin-bottom: 20px;\n        }\n\n        .chart-container {\n            position: relative;\n            height: 250px;\n        }\n\n        .projects-section {\n            margin-top: 30px;\n        }\n\n        .project-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            margin-bottom: 15px;\n        }\n\n        .project-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 15px;\n        }\n\n        .project-name {\n            font-size: 18px;\n            font-weight: 600;\n        }\n\n        .reset-btn {\n            background-color: transparent;\n            color: var(--danger-color);\n            border: 1px solid var(--danger-color);\n            padding: 5px 10px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 12px;\n        }\n\n        .reset-btn:hover {\n            background-color: var(--danger-color);\n            color: white;\n        }\n\n        .project-stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 10px;\n        }\n\n        .stat {\n            display: flex;\n            flex-direction: column;\n            position: relative;\n        }\n\n        .stat:hover .stat-reset-btn {\n            opacity: 1;\n        }\n\n        .stat-reset-btn {\n            position: absolute;\n            top: 0;\n            right: 0;\n            background: transparent;\n            border: none;\n            color: var(--danger-color);\n            cursor: pointer;\n            font-size: 10px;\n            padding: 2px 5px;\n            opacity: 0;\n            transition: opacity 0.2s;\n            border-radius: 3px;\n        }\n\n        .stat-reset-btn:hover {\n            background-color: var(--danger-color);\n            color: white;\n        }\n\n        .stat .stat-value {\n            font-size: 20px;\n            font-weight: bold;\n        }\n\n        .stat .stat-label {\n            font-size: 11px;\n            opacity: 0.7;\n            text-transform: uppercase;\n        }\n\n        .no-data {\n            text-align: center;\n            padding: 40px;\n            opacity: 0.6;\n        }\n\n        @media (max-width: 600px) {\n            .charts-container {\n                grid-template-columns: 1fr;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <h1>PUNCHCARD - Work Time Statistics</h1>\n        <button class=\"refresh-btn\" onclick=\"refresh()\">üîÑ Refresh</button>\n    </div>\n\n    <div class=\"summary-grid\">\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('totalTime', 'Total Time')\">‚úï</button>\n            <div class=\"value\">${formatTime(summary.totalTime)}</div>\n            <div class=\"label\">Total Time</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${formatTime(todayTime)}</div>\n            <div class=\"label\">Today</div>\n        </div>\n        <div class=\"summary-card\">\n            <div class=\"value\">${summary.projectCount}</div>\n            <div class=\"label\">Projects</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('sessions', 'Sessions')\">‚úï</button>\n            <div class=\"value\">${summary.totalSessions}</div>\n            <div class=\"label\">Sessions</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('keystrokes', 'Keystrokes')\">‚úï</button>\n            <div class=\"value\">${this.formatNumber(summary.totalKeystrokes)}</div>\n            <div class=\"label\">Keystrokes</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesAdded', 'Lines Added (Typed)')\">‚úï</button>\n            <div class=\"value\">+${this.formatNumber(summary.totalLinesAdded)}</div>\n            <div class=\"label\">Lines Added (Typed)</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesDeleted', 'Lines Deleted (Typed)')\">‚úï</button>\n            <div class=\"value\">-${this.formatNumber(summary.totalLinesDeleted)}</div>\n            <div class=\"label\">Lines Deleted (Typed)</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('linesAddedBulk', 'Lines Added (Bulk)')\">‚úï</button>\n            <div class=\"value\">+${this.formatNumber(summary.totalLinesAddedBulk || 0)}</div>\n            <div class=\"label\">Lines Added (Bulk/Paste)</div>\n        </div>\n        <div class=\"summary-card\">\n            <button class=\"summary-reset-btn\" onclick=\"resetGlobalStat('charactersAdded', 'Characters Added')\">‚úï</button>\n            <div class=\"value\">${this.formatNumber(summary.totalCharsAdded)}</div>\n            <div class=\"label\">Chars Added</div>\n        </div>\n    </div>\n\n    <div class=\"charts-container\">\n        <div class=\"chart-card\">\n            <h3>üìÖ Daily Activity (Last 7 Days)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"dailyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>üìä Weekly Activity (Last 4 Weeks)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"weeklyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>üìà Monthly Activity (Last 6 Months)</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"monthlyChart\"></canvas>\n            </div>\n        </div>\n        <div class=\"chart-card\">\n            <h3>ü•ß Time by Project</h3>\n            <div class=\"chart-container\">\n                <canvas id=\"projectsChart\"></canvas>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"projects-section\">\n        <h2>üìÅ Projects</h2>\n        ${Object.keys(projects).length === 0 ? \n            '<div class=\"no-data\">No projects tracked yet. Start coding to see your statistics!</div>' :\n            Object.entries(projects).map(([projectId, stats]) => `\n                <div class=\"project-card\">\n                    <div class=\"project-header\">\n                        <span class=\"project-name\">${this.escapeHtml(projectId)}</span>\n                        <button class=\"reset-btn\" onclick=\"resetProject('${this.escapeHtml(projectId)}')\">üóëÔ∏è Reset All</button>\n                    </div>\n                    <div class=\"project-stats\">\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${formatTime(stats.totalTime)}</span>\n                            <span class=\"stat-label\">Total Time</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'totalTime', 'Total Time')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${stats.sessions.length}</span>\n                            <span class=\"stat-label\">Sessions</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'sessions', 'Sessions')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${this.formatNumber(stats.keystrokes)}</span>\n                            <span class=\"stat-label\">Keystrokes</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'keystrokes', 'Keystrokes')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">+${this.formatNumber(stats.linesAdded)}</span>\n                            <span class=\"stat-label\">Lines (Typed)</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesAdded', 'Lines Added (Typed)')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">-${this.formatNumber(stats.linesDeleted)}</span>\n                            <span class=\"stat-label\">Lines Del (Typed)</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesDeleted', 'Lines Deleted (Typed)')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">+${this.formatNumber(stats.linesAddedBulk || 0)}</span>\n                            <span class=\"stat-label\">Lines (Bulk/Paste)</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'linesAddedBulk', 'Lines Added (Bulk)')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${this.formatNumber(stats.charactersAdded)}</span>\n                            <span class=\"stat-label\">Chars Added</span>\n                            <button class=\"stat-reset-btn\" onclick=\"resetStat('${this.escapeHtml(projectId)}', 'charactersAdded', 'Characters Added')\">‚úï</button>\n                        </div>\n                        <div class=\"stat\">\n                            <span class=\"stat-value\">${stats.lastActive ? new Date(stats.lastActive).toLocaleDateString() : 'Never'}</span>\n                            <span class=\"stat-label\">Last Active</span>\n                        </div>\n                    </div>\n                </div>\n            `).join('')\n        }\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n\n        function refresh() {\n            vscode.postMessage({ command: 'refresh' });\n        }\n\n        function resetProject(projectId) {\n            vscode.postMessage({ command: 'resetProject', projectId: projectId });\n        }\n\n        function resetStat(projectId, statName, statLabel) {\n            vscode.postMessage({ command: 'resetStat', projectId: projectId, statName: statName, statLabel: statLabel });\n        }\n\n        function resetGlobalStat(statName, statLabel) {\n            vscode.postMessage({ command: 'resetGlobalStat', statName: statName, statLabel: statLabel });\n        }\n\n        // Chart.js configuration\n        Chart.defaults.color = getComputedStyle(document.body).getPropertyValue('--vscode-editor-foreground') || '#ffffff';\n        Chart.defaults.borderColor = getComputedStyle(document.body).getPropertyValue('--vscode-panel-border') || '#333333';\n\n        const chartColors = [\n            '#4FC3F7', '#81C784', '#FFB74D', '#F06292', '#BA68C8',\n            '#4DD0E1', '#AED581', '#FF8A65', '#9575CD', '#7986CB'\n        ];\n\n        // Daily Chart\n        const dailyData = ${JSON.stringify(dailyData)};\n        new Chart(document.getElementById('dailyChart'), {\n            type: 'bar',\n            data: {\n                labels: dailyData.map(d => d.date),\n                datasets: [{\n                    label: 'Hours',\n                    data: dailyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#4FC3F7',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Weekly Chart\n        const weeklyData = ${JSON.stringify(weeklyData)};\n        new Chart(document.getElementById('weeklyChart'), {\n            type: 'bar',\n            data: {\n                labels: weeklyData.map(d => d.week),\n                datasets: [{\n                    label: 'Hours',\n                    data: weeklyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#81C784',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Monthly Chart\n        const monthlyData = ${JSON.stringify(monthlyData)};\n        new Chart(document.getElementById('monthlyChart'), {\n            type: 'line',\n            data: {\n                labels: monthlyData.map(d => d.month),\n                datasets: [{\n                    label: 'Hours',\n                    data: monthlyData.map(d => (d.time / 3600000).toFixed(2)),\n                    borderColor: '#FFB74D',\n                    backgroundColor: 'rgba(255, 183, 77, 0.2)',\n                    fill: true,\n                    tension: 0.3\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Projects Pie Chart\n        const projectsData = ${JSON.stringify(Object.entries(projects).map(([name, stats]) => ({ name, time: stats.totalTime })))};\n        if (projectsData.length > 0) {\n            new Chart(document.getElementById('projectsChart'), {\n                type: 'doughnut',\n                data: {\n                    labels: projectsData.map(d => d.name),\n                    datasets: [{\n                        data: projectsData.map(d => (d.time / 3600000).toFixed(2)),\n                        backgroundColor: chartColors.slice(0, projectsData.length)\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'right',\n                            labels: {\n                                boxWidth: 12,\n                                padding: 10\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    </script>\n</body>\n</html>`;\n    }\n\n    /**\n     * Format a number with thousands separator\n     * @param {number} num \n     * @returns {string}\n     */\n    formatNumber(num) {\n        return num.toLocaleString();\n    }\n\n    /**\n     * Escape HTML special characters\n     * @param {string} text \n     * @returns {string}\n     */\n    escapeHtml(text) {\n        const div = { \n            '&': '&amp;', \n            '<': '&lt;', \n            '>': '&gt;', \n            '\"': '&quot;', \n            \"'\": '&#039;' \n        };\n        return text.replace(/[&<>\"']/g, (m) => div[m]);\n    }\n\n    /**\n     * Dispose the webview\n     */\n    dispose() {\n        if (this.panel) {\n            this.panel.dispose();\n            this.panel = null;\n        }\n    }\n}\n\nmodule.exports = { StatsWebView };\n","const vscode = require('vscode');\nconst { getProjectId } = require('./utils');\nconst { createEmptyProjectStats } = require('./types');\n\n/**\n * Time tracker for monitoring user activity\n */\nclass Tracker {\n    /**\n     * @param {import('./storage').Storage} storage \n     */\n    constructor(storage) {\n        this.storage = storage;\n        this.projectId = getProjectId();\n        this.isTracking = false;\n        this.lastActivity = Date.now();\n        this.sessionStartTime = 0;\n        this.currentSessionTime = 0;\n        this.isAfk = false;\n        this.afkThreshold = 300000; // 5 minutes default\n        this.checkInterval = null;\n        this.disposables = [];\n        this.onTimeUpdateCallback = null;\n        this.onAfkChangeCallback = null;\n    }\n\n    /**\n     * Initialize the tracker\n     */\n    initialize() {\n        // Load configuration\n        this.loadConfig();\n\n        // Listen for config changes\n        this.disposables.push(\n            vscode.workspace.onDidChangeConfiguration((e) => {\n                if (e.affectsConfiguration('punchcardWorkTimer')) {\n                    this.loadConfig();\n                }\n            })\n        );\n\n        // Check if we should track on startup\n        const config = vscode.workspace.getConfiguration('punchcardWorkTimer');\n        if (config.get('trackOnStartup', true)) {\n            this.start();\n        }\n    }\n\n    /**\n     * Load configuration\n     */\n    loadConfig() {\n        const config = vscode.workspace.getConfiguration('punchcardWorkTimer');\n        this.afkThreshold = config.get('afkThreshold', 300000);\n    }\n\n    /**\n     * Start tracking\n     */\n    start() {\n        if (this.isTracking) {\n            return;\n        }\n\n        this.isTracking = true;\n        this.lastActivity = Date.now();\n        this.sessionStartTime = Date.now();\n        this.currentSessionTime = 0;\n        this.isAfk = false;\n\n        // Register activity listeners\n        this.registerActivityListeners();\n\n        // Start the check interval (every second)\n        this.checkInterval = setInterval(() => this.tick(), 1000);\n\n        // Create a new session\n        this.storage.addSession(this.projectId, {\n            startTime: this.sessionStartTime,\n            endTime: this.sessionStartTime,\n            duration: 0\n        });\n    }\n\n    /**\n     * Stop tracking\n     */\n    stop() {\n        if (!this.isTracking) {\n            return;\n        }\n\n        this.isTracking = false;\n\n        // Clear interval\n        if (this.checkInterval) {\n            clearInterval(this.checkInterval);\n            this.checkInterval = null;\n        }\n\n        // Dispose activity listeners\n        this.disposeActivityListeners();\n\n        // Finalize session\n        if (this.sessionStartTime > 0) {\n            const endTime = Date.now();\n            this.storage.updateLastSession(\n                this.projectId,\n                endTime,\n                this.currentSessionTime\n            );\n        }\n    }\n\n    /**\n     * Register activity event listeners\n     */\n    registerActivityListeners() {\n        // Text document changes (typing)\n        this.disposables.push(\n            vscode.workspace.onDidChangeTextDocument((e) => {\n                this.onActivity();\n                this.trackDocumentChanges(e);\n            })\n        );\n\n        // Cursor movement\n        this.disposables.push(\n            vscode.window.onDidChangeTextEditorSelection(() => {\n                this.onActivity();\n            })\n        );\n\n        // Scrolling\n        this.disposables.push(\n            vscode.window.onDidChangeTextEditorVisibleRanges(() => {\n                this.onActivity();\n            })\n        );\n\n        // File switching\n        this.disposables.push(\n            vscode.window.onDidChangeActiveTextEditor(() => {\n                this.onActivity();\n                // Update project ID in case workspace changed\n                this.projectId = getProjectId();\n            })\n        );\n    }\n\n    /**\n     * Dispose activity listeners\n     */\n    disposeActivityListeners() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n        this.disposables = [];\n    }\n\n    /**\n     * Called when any activity is detected\n     */\n    onActivity() {\n        const wasAfk = this.isAfk;\n        this.lastActivity = Date.now();\n        this.isAfk = false;\n\n        if (wasAfk && this.onAfkChangeCallback) {\n            this.onAfkChangeCallback(false);\n            \n            // Start a new session when coming back from AFK\n            this.sessionStartTime = Date.now();\n            this.currentSessionTime = 0;\n            this.storage.addSession(this.projectId, {\n                startTime: this.sessionStartTime,\n                endTime: this.sessionStartTime,\n                duration: 0\n            });\n        }\n    }\n\n    /**\n     * Track document changes (keystrokes, lines, characters)\n     * Distinguishes between typed input and bulk operations (paste, format, git ops)\n     * @param {vscode.TextDocumentChangeEvent} event \n     */\n    trackDocumentChanges(event) {\n        if (!event.contentChanges.length) {\n            return;\n        }\n\n        let linesAdded = 0;\n        let linesDeleted = 0;\n        let charsAdded = 0;\n        let charsDeleted = 0;\n        let keystrokes = 0;\n        let linesAddedBulk = 0;\n        let linesDeletedBulk = 0;\n\n        // Threshold to distinguish typing from bulk operations\n        // Typing typically involves small changes (1-5 chars at a time)\n        // Paste/format/git operations involve larger changes\n        const BULK_CHAR_THRESHOLD = 10;\n        const BULK_LINE_THRESHOLD = 3;\n\n        for (const change of event.contentChanges) {\n            const textLength = change.text.length;\n            const deletedLength = change.rangeLength;\n            \n            // Count characters (always track these)\n            charsAdded += textLength;\n            charsDeleted += deletedLength;\n\n            // Count lines\n            const newLines = (change.text.match(/\\n/g) || []).length;\n            const deletedLines = change.range.end.line - change.range.start.line;\n\n            // Detect if this is a bulk operation (paste, format, git merge, etc.)\n            const isBulkOperation = \n                textLength > BULK_CHAR_THRESHOLD || \n                deletedLength > BULK_CHAR_THRESHOLD ||\n                newLines > BULK_LINE_THRESHOLD ||\n                deletedLines > BULK_LINE_THRESHOLD;\n\n            if (isBulkOperation) {\n                // Track bulk operations separately - these are NOT keystrokes\n                // Could be paste, auto-format, git operations, find-replace, etc.\n                linesAddedBulk += newLines;\n                linesDeletedBulk += deletedLines;\n                // No keystrokes for bulk operations\n            } else {\n                // This looks like actual typing\n                linesAdded += newLines;\n                linesDeleted += deletedLines;\n                \n                // Count keystrokes more accurately:\n                // - Empty text with deletion = backspace/delete key (1 keystroke)\n                // - Single char = 1 keystroke\n                // - Small multi-char (autocomplete acceptance) = 1 keystroke\n                if (textLength === 0 && deletedLength > 0) {\n                    // Backspace or delete key\n                    keystrokes += 1;\n                } else if (textLength > 0) {\n                    // Typing or small autocomplete\n                    keystrokes += 1;\n                }\n            }\n        }\n\n        // Only save metrics if there's something to track\n        if (keystrokes > 0 || charsAdded > 0 || charsDeleted > 0 || \n            linesAdded > 0 || linesDeleted > 0 || linesAddedBulk > 0 || linesDeletedBulk > 0) {\n            this.storage.addMetrics(this.projectId, {\n                linesAdded,\n                linesDeleted,\n                linesAddedBulk,\n                linesDeletedBulk,\n                charactersAdded: charsAdded,\n                charactersDeleted: charsDeleted,\n                keystrokes\n            });\n        }\n    }\n\n    /**\n     * Tick function called every second\n     */\n    tick() {\n        if (!this.isTracking) {\n            return;\n        }\n\n        const now = Date.now();\n        const timeSinceActivity = now - this.lastActivity;\n\n        // Check for AFK\n        if (timeSinceActivity >= this.afkThreshold) {\n            if (!this.isAfk) {\n                this.isAfk = true;\n                \n                // Finalize current session\n                this.storage.updateLastSession(\n                    this.projectId,\n                    this.lastActivity,\n                    this.currentSessionTime\n                );\n\n                if (this.onAfkChangeCallback) {\n                    this.onAfkChangeCallback(true);\n                }\n            }\n            return;\n        }\n\n        // Add time if not AFK\n        if (!this.isAfk) {\n            this.currentSessionTime += 1000;\n            this.storage.addTime(this.projectId, 1000);\n            \n            // Update session\n            this.storage.updateLastSession(\n                this.projectId,\n                now,\n                this.currentSessionTime\n            );\n\n            if (this.onTimeUpdateCallback) {\n                this.onTimeUpdateCallback(this.currentSessionTime);\n            }\n        }\n    }\n\n    /**\n     * Set callback for time updates\n     * @param {(time: number) => void} callback \n     */\n    onTimeUpdate(callback) {\n        this.onTimeUpdateCallback = callback;\n    }\n\n    /**\n     * Set callback for AFK status changes\n     * @param {(isAfk: boolean) => void} callback \n     */\n    onAfkChange(callback) {\n        this.onAfkChangeCallback = callback;\n    }\n\n    /**\n     * Get current session time\n     * @returns {number}\n     */\n    getCurrentSessionTime() {\n        return this.currentSessionTime;\n    }\n\n    /**\n     * Get today's total time for current project\n     * @returns {number}\n     */\n    getTodayTime() {\n        const stats = this.storage.getProjectStats(this.projectId);\n        const startOfDay = new Date();\n        startOfDay.setHours(0, 0, 0, 0);\n        const startTimestamp = startOfDay.getTime();\n        const now = Date.now();\n\n        let todayTime = 0;\n        for (const session of stats.sessions) {\n            if (session.startTime >= startTimestamp) {\n                // Session started today\n                todayTime += session.duration;\n            } else if (session.endTime > startTimestamp) {\n                // Session spans midnight\n                todayTime += session.endTime - startTimestamp;\n            }\n        }\n\n        return todayTime;\n    }\n\n    /**\n     * Check if currently tracking\n     * @returns {boolean}\n     */\n    isCurrentlyTracking() {\n        return this.isTracking && !this.isAfk;\n    }\n\n    /**\n     * Get current project ID\n     * @returns {string}\n     */\n    getProjectId() {\n        return this.projectId;\n    }\n\n    /**\n     * Dispose the tracker\n     */\n    dispose() {\n        this.stop();\n        this.disposeActivityListeners();\n    }\n}\n\nmodule.exports = { Tracker };\n","/**\n * @typedef {Object} ProjectStats\n * @property {number} totalTime - Total active time in milliseconds\n * @property {number} linesAdded - Total lines added (typed)\n * @property {number} linesDeleted - Total lines deleted (typed)\n * @property {number} linesAddedBulk - Total lines added via bulk operations (paste, format, git)\n * @property {number} linesDeletedBulk - Total lines deleted via bulk operations\n * @property {number} charactersAdded - Total characters added\n * @property {number} charactersDeleted - Total characters deleted\n * @property {number} keystrokes - Total keystrokes (actual key presses, not pasted chars)\n * @property {Session[]} sessions - Array of work sessions\n * @property {number} lastActive - Last active timestamp\n */\n\n/**\n * @typedef {Object} Session\n * @property {number} startTime - Session start timestamp\n * @property {number} endTime - Session end timestamp\n * @property {number} duration - Session duration in milliseconds\n */\n\n/**\n * @typedef {Object} StorageData\n * @property {Object.<string, ProjectStats>} projects - Map of project paths to stats\n * @property {number} totalTimeAllProjects - Total time across all projects\n * @property {number} totalKeystrokes - Total keystrokes across all projects\n */\n\n/**\n * Creates a new empty ProjectStats object\n * @returns {ProjectStats}\n */\nfunction createEmptyProjectStats() {\n    return {\n        totalTime: 0,\n        linesAdded: 0,\n        linesDeleted: 0,\n        linesAddedBulk: 0,\n        linesDeletedBulk: 0,\n        charactersAdded: 0,\n        charactersDeleted: 0,\n        keystrokes: 0,\n        sessions: [],\n        lastActive: 0\n    };\n}\n\n/**\n * Creates a new empty StorageData object\n * @returns {StorageData}\n */\nfunction createEmptyStorageData() {\n    return {\n        projects: {},\n        totalTimeAllProjects: 0,\n        totalKeystrokes: 0\n    };\n}\n\nmodule.exports = {\n    createEmptyProjectStats,\n    createEmptyStorageData\n};\n","module.exports = require(\"vscode\");","const vscode = require('vscode');\n\n/**\n * Format milliseconds to HH:MM:SS string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Formatted time string\n */\nfunction formatTime(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format milliseconds to human readable string\n * @param {number} ms - Milliseconds to format\n * @returns {string} Human readable time string\n */\nfunction formatTimeHuman(ms) {\n    if (ms < 0) ms = 0;\n    \n    const totalSeconds = Math.floor(ms / 1000);\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    const parts = [];\n    if (hours > 0) parts.push(`${hours}h`);\n    if (minutes > 0) parts.push(`${minutes}m`);\n    if (seconds > 0 || parts.length === 0) parts.push(`${seconds}s`);\n    \n    return parts.join(' ');\n}\n\n/**\n * Get project identifier from workspace\n * @returns {string} Project identifier\n */\nfunction getProjectId() {\n    const workspaceFolders = vscode.workspace.workspaceFolders;\n    \n    if (!workspaceFolders || workspaceFolders.length === 0) {\n        return 'unknown-project';\n    }\n    \n    // Use workspace name if available, otherwise use first folder path\n    const workspaceName = vscode.workspace.name;\n    if (workspaceName) {\n        return workspaceName;\n    }\n    \n    return workspaceFolders[0].uri.fsPath;\n}\n\n/**\n * Get start of today in milliseconds\n * @returns {number} Timestamp of start of today\n */\nfunction getStartOfDay() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();\n}\n\n/**\n * Get start of week in milliseconds (Monday)\n * @returns {number} Timestamp of start of week\n */\nfunction getStartOfWeek() {\n    const now = new Date();\n    const day = now.getDay();\n    const diff = now.getDate() - day + (day === 0 ? -6 : 1);\n    return new Date(now.getFullYear(), now.getMonth(), diff).getTime();\n}\n\n/**\n * Get start of month in milliseconds\n * @returns {number} Timestamp of start of month\n */\nfunction getStartOfMonth() {\n    const now = new Date();\n    return new Date(now.getFullYear(), now.getMonth(), 1).getTime();\n}\n\n/**\n * Check if a session is within a time range\n * @param {{ startTime: number, endTime: number }} session - Session object\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {boolean} True if session overlaps with range\n */\nfunction isSessionInRange(session, startRange, endRange) {\n    return session.startTime < endRange && session.endTime > startRange;\n}\n\n/**\n * Calculate time spent in a range from sessions\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} startRange - Start of range timestamp\n * @param {number} endRange - End of range timestamp\n * @returns {number} Time spent in range in milliseconds\n */\nfunction getTimeInRange(sessions, startRange, endRange) {\n    let total = 0;\n    \n    for (const session of sessions) {\n        if (isSessionInRange(session, startRange, endRange)) {\n            const overlapStart = Math.max(session.startTime, startRange);\n            const overlapEnd = Math.min(session.endTime, endRange);\n            total += overlapEnd - overlapStart;\n        }\n    }\n    \n    return total;\n}\n\n/**\n * Get daily breakdown for the last N days\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} days - Number of days to include\n * @returns {Array<{ date: string, time: number }>} Daily breakdown\n */\nfunction getDailyBreakdown(sessions, days = 7) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = days - 1; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth(), now.getDate() - i);\n        const startOfDay = date.getTime();\n        const endOfDay = startOfDay + 24 * 60 * 60 * 1000;\n        \n        result.push({\n            date: date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),\n            time: getTimeInRange(sessions, startOfDay, endOfDay)\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get weekly breakdown for the last N weeks\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} weeks - Number of weeks to include\n * @returns {Array<{ week: string, time: number }>} Weekly breakdown\n */\nfunction getWeeklyBreakdown(sessions, weeks = 4) {\n    const result = [];\n    const now = new Date();\n    const currentDay = now.getDay();\n    const diff = now.getDate() - currentDay + (currentDay === 0 ? -6 : 1);\n    \n    for (let i = weeks - 1; i >= 0; i--) {\n        const weekStart = new Date(now.getFullYear(), now.getMonth(), diff - (i * 7));\n        const weekEnd = new Date(weekStart.getTime() + 7 * 24 * 60 * 60 * 1000);\n        \n        result.push({\n            week: `Week of ${weekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`,\n            time: getTimeInRange(sessions, weekStart.getTime(), weekEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\n/**\n * Get monthly breakdown for the last N months\n * @param {Array<{ startTime: number, endTime: number, duration: number }>} sessions - Array of sessions\n * @param {number} months - Number of months to include\n * @returns {Array<{ month: string, time: number }>} Monthly breakdown\n */\nfunction getMonthlyBreakdown(sessions, months = 6) {\n    const result = [];\n    const now = new Date();\n    \n    for (let i = months - 1; i >= 0; i--) {\n        const monthStart = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const monthEnd = new Date(now.getFullYear(), now.getMonth() - i + 1, 1);\n        \n        result.push({\n            month: monthStart.toLocaleDateString('en-US', { month: 'long', year: 'numeric' }),\n            time: getTimeInRange(sessions, monthStart.getTime(), monthEnd.getTime())\n        });\n    }\n    \n    return result;\n}\n\nmodule.exports = {\n    formatTime,\n    formatTimeHuman,\n    getProjectId,\n    getStartOfDay,\n    getStartOfWeek,\n    getStartOfMonth,\n    isSessionInRange,\n    getTimeInRange,\n    getDailyBreakdown,\n    getWeeklyBreakdown,\n    getMonthlyBreakdown\n};\n","const vscode = require('vscode');\nconst { Storage } = require('./storage');\nconst { Tracker } = require('./tracker');\nconst { StatusBar } = require('./statusBar');\nconst { StatsWebView } = require('./webview');\n\n/** @type {Storage} */\nlet storage;\n/** @type {Tracker} */\nlet tracker;\n/** @type {StatusBar} */\nlet statusBar;\n/** @type {StatsWebView} */\nlet webview;\n\n/**\n * Activate the extension\n * @param {vscode.ExtensionContext} context \n */\nasync function activate(context) {\n    console.log('PUNCHCARD - Work Time Statistics is now active!');\n\n    // Initialize storage\n    storage = new Storage(context);\n    await storage.initialize();\n\n    // Initialize tracker\n    tracker = new Tracker(storage);\n    tracker.initialize();\n\n    // Initialize status bar\n    statusBar = new StatusBar(tracker);\n    statusBar.initialize();\n\n    // Initialize webview\n    webview = new StatsWebView(context, storage);\n\n    // Register commands\n    const showStatsCommand = vscode.commands.registerCommand('workTimer.showStats', () => {\n        webview.show();\n    });\n\n    const resetProjectCommand = vscode.commands.registerCommand('workTimer.resetProject', async () => {\n        const projectId = tracker.getProjectId();\n        const confirm = await vscode.window.showWarningMessage(\n            `Are you sure you want to reset statistics for \"${projectId}\"?`,\n            { modal: true },\n            'Yes, Reset'\n        );\n        if (confirm === 'Yes, Reset') {\n            await storage.resetProject(projectId);\n            vscode.window.showInformationMessage(`Statistics for \"${projectId}\" have been reset.`);\n        }\n    });\n\n    const resetAllCommand = vscode.commands.registerCommand('workTimer.resetAll', async () => {\n        const confirm = await vscode.window.showWarningMessage(\n            'Are you sure you want to reset ALL statistics? This cannot be undone.',\n            { modal: true },\n            'Yes, Reset All'\n        );\n        if (confirm === 'Yes, Reset All') {\n            await storage.resetAll();\n            vscode.window.showInformationMessage('All statistics have been reset.');\n        }\n    });\n\n    const exportDataCommand = vscode.commands.registerCommand('workTimer.exportData', async () => {\n        const data = storage.getAllData();\n        const jsonContent = JSON.stringify(data, null, 2);\n        \n        const uri = await vscode.window.showSaveDialog({\n            defaultUri: vscode.Uri.file('punchcard-stats.json'),\n            filters: {\n                'JSON Files': ['json']\n            }\n        });\n\n        if (uri) {\n            await vscode.workspace.fs.writeFile(uri, Buffer.from(jsonContent, 'utf8'));\n            vscode.window.showInformationMessage(`Statistics exported to ${uri.fsPath}`);\n        }\n    });\n\n    const importDataCommand = vscode.commands.registerCommand('workTimer.importData', async () => {\n        const uri = await vscode.window.showOpenDialog({\n            canSelectFiles: true,\n            canSelectFolders: false,\n            canSelectMany: false,\n            filters: {\n                'JSON Files': ['json']\n            }\n        });\n\n        if (uri && uri[0]) {\n            try {\n                const fileContent = await vscode.workspace.fs.readFile(uri[0]);\n                const importedData = JSON.parse(Buffer.from(fileContent).toString('utf8'));\n                \n                if (importedData && importedData.projects) {\n                    const confirm = await vscode.window.showWarningMessage(\n                        'This will merge imported data with existing data. Continue?',\n                        { modal: true },\n                        'Yes, Import'\n                    );\n                    \n                    if (confirm === 'Yes, Import') {\n                        await storage.importData(importedData);\n                        vscode.window.showInformationMessage('Data imported successfully!');\n                    }\n                } else {\n                    vscode.window.showErrorMessage('Invalid data format. Expected a valid PUNCHCARD export file.');\n                }\n            } catch (error) {\n                vscode.window.showErrorMessage(`Failed to import data: ${error.message}`);\n            }\n        }\n    });\n\n    const checkSyncCommand = vscode.commands.registerCommand('workTimer.checkSync', async () => {\n        const data = storage.getAllData();\n        const projectCount = Object.keys(data.projects).length;\n        const totalTime = data.totalTimeAllProjects;\n        \n        const hours = Math.floor(totalTime / 3600000);\n        const minutes = Math.floor((totalTime % 3600000) / 60000);\n        \n        const message = [\n            'üìä PUNCHCARD Sync Status',\n            '',\n            `Projects tracked: ${projectCount}`,\n            `Total time: ${hours}h ${minutes}m`,\n            `Total keystrokes: ${data.totalKeystrokes}`,\n            '',\n            '‚öôÔ∏è For sync to work:',\n            '1. Settings Sync must be ON (Ctrl+Shift+P ‚Üí \"Settings Sync: Turn On\")',\n            '2. \"UI State\" must be checked in sync settings',\n            '3. Same Microsoft/GitHub account on both machines',\n            '4. Run \"Settings Sync: Sync Now\" to force sync',\n            '',\n            'Note: Sync may take a few minutes. Reload VS Code after syncing.'\n        ].join('\\n');\n        \n        vscode.window.showInformationMessage(message, { modal: true });\n    });\n\n    // Add commands to subscriptions\n    context.subscriptions.push(\n        showStatsCommand,\n        resetProjectCommand,\n        resetAllCommand,\n        exportDataCommand,\n        importDataCommand,\n        checkSyncCommand\n    );\n\n    // Add disposables\n    context.subscriptions.push({\n        dispose: () => {\n            tracker.dispose();\n            statusBar.dispose();\n            webview.dispose();\n        }\n    });\n}\n\n/**\n * Deactivate the extension\n */\nfunction deactivate() {\n    if (tracker) {\n        tracker.dispose();\n    }\n    if (statusBar) {\n        statusBar.dispose();\n    }\n    if (webview) {\n        webview.dispose();\n    }\n}\n\nmodule.exports = {\n    activate,\n    deactivate\n};\n","const vscode = require('vscode');\nconst { formatTime } = require('./utils');\n\n/**\n * Status bar item manager\n */\nclass StatusBar {\n    /**\n     * @param {import('./tracker').Tracker} tracker \n     */\n    constructor(tracker) {\n        this.tracker = tracker;\n        this.statusBarItem = vscode.window.createStatusBarItem(\n            vscode.StatusBarAlignment.Left,\n            100\n        );\n        this.statusBarItem.command = 'workTimer.showStats';\n        this.statusBarItem.tooltip = 'Click to view work time statistics';\n        this.updateInterval = null;\n    }\n\n    /**\n     * Initialize the status bar\n     */\n    initialize() {\n        this.statusBarItem.show();\n        this.update();\n\n        // Update every second\n        this.updateInterval = setInterval(() => this.update(), 1000);\n\n        // Listen for time updates from tracker\n        this.tracker.onTimeUpdate(() => this.update());\n        this.tracker.onAfkChange((isAfk) => this.updateAfkStatus(isAfk));\n    }\n\n    /**\n     * Update the status bar display\n     */\n    update() {\n        const sessionTime = this.tracker.getCurrentSessionTime();\n        const todayTime = this.tracker.getTodayTime();\n        const isTracking = this.tracker.isCurrentlyTracking();\n\n        const sessionStr = formatTime(sessionTime);\n        const todayStr = formatTime(todayTime);\n\n        const icon = isTracking ? '$(clock)' : '$(debug-pause)';\n        this.statusBarItem.text = `${icon} ${sessionStr} | Today: ${todayStr}`;\n        \n        if (!isTracking) {\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n        }\n    }\n\n    /**\n     * Update AFK status display\n     * @param {boolean} isAfk \n     */\n    updateAfkStatus(isAfk) {\n        if (isAfk) {\n            this.statusBarItem.text = `$(debug-pause) AFK - ${this.statusBarItem.text.split(' | ')[1] || ''}`;\n            this.statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n        } else {\n            this.statusBarItem.backgroundColor = undefined;\n            this.update();\n        }\n    }\n\n    /**\n     * Dispose the status bar\n     */\n    dispose() {\n        if (this.updateInterval) {\n            clearInterval(this.updateInterval);\n            this.updateInterval = null;\n        }\n        this.statusBarItem.dispose();\n    }\n}\n\nmodule.exports = { StatusBar };\n","const { createEmptyProjectStats, createEmptyStorageData } = require('./types');\n\nconst STORAGE_KEY = 'punchcard-work-stats';\nconst SYNC_KEYS = [STORAGE_KEY];\n\n/**\n * Storage manager for work time statistics\n * Uses VS Code's globalState with sync enabled for cross-device synchronization\n */\nclass Storage {\n    /**\n     * @param {import('vscode').ExtensionContext} context \n     */\n    constructor(context) {\n        this.context = context;\n        this.data = createEmptyStorageData();\n        this.initialized = false;\n        this.syncCheckTimeout = null;\n    }\n\n    /**\n     * Initialize storage and set up sync\n     */\n    async initialize() {\n        // Enable sync for our storage key - this tells VS Code to sync this key\n        // when Settings Sync is enabled and \"UI State\" sync is turned on\n        this.context.globalState.setKeysForSync(SYNC_KEYS);\n        \n        // Load existing data\n        await this.load();\n        this.initialized = true;\n        \n        console.log('PUNCHCARD: Storage initialized');\n        console.log('PUNCHCARD: Sync keys registered:', SYNC_KEYS);\n        console.log('PUNCHCARD: Data loaded, projects:', Object.keys(this.data.projects).length);\n        \n        // Schedule a delayed reload to catch any synced data that arrives after startup\n        // This helps with the race condition where local data loads before sync completes\n        this.scheduleSyncCheck();\n    }\n\n    /**\n     * Schedule a check for synced data after a delay\n     * This helps catch data that syncs after the initial load\n     */\n    scheduleSyncCheck() {\n        // Check after 5 seconds, 15 seconds, and 30 seconds\n        const delays = [5000, 15000, 30000];\n        \n        delays.forEach(delay => {\n            setTimeout(async () => {\n                await this.checkForSyncedData();\n            }, delay);\n        });\n    }\n\n    /**\n     * Check if synced data has arrived and merge it with current data\n     */\n    async checkForSyncedData() {\n        const stored = this.context.globalState.get(STORAGE_KEY);\n        \n        if (!stored || !stored.projects) {\n            return;\n        }\n        \n        // Check if the synced data has more data than current\n        const storedProjectCount = Object.keys(stored.projects).length;\n        const currentProjectCount = Object.keys(this.data.projects).length;\n        const storedTotalTime = stored.totalTimeAllProjects || 0;\n        const currentTotalTime = this.data.totalTimeAllProjects || 0;\n        \n        // If synced data appears to have more/different data, merge it\n        if (storedProjectCount > currentProjectCount || storedTotalTime > currentTotalTime) {\n            console.log('PUNCHCARD: Detected synced data, merging...');\n            this.mergeWithSyncedData(stored);\n            await this.save();\n        }\n    }\n\n    /**\n     * Merge synced data with current data, taking larger values\n     * @param {import('./types').StorageData} syncedData\n     */\n    mergeWithSyncedData(syncedData) {\n        for (const projectId in syncedData.projects) {\n            const syncedStats = syncedData.projects[projectId];\n            \n            if (!this.data.projects[projectId]) {\n                // New project from sync\n                this.data.projects[projectId] = syncedStats;\n            } else {\n                // Merge: take larger values (assumes data only grows)\n                const currentStats = this.data.projects[projectId];\n                this.data.projects[projectId] = {\n                    totalTime: Math.max(currentStats.totalTime || 0, syncedStats.totalTime || 0),\n                    linesAdded: Math.max(currentStats.linesAdded || 0, syncedStats.linesAdded || 0),\n                    linesDeleted: Math.max(currentStats.linesDeleted || 0, syncedStats.linesDeleted || 0),\n                    linesAddedBulk: Math.max(currentStats.linesAddedBulk || 0, syncedStats.linesAddedBulk || 0),\n                    linesDeletedBulk: Math.max(currentStats.linesDeletedBulk || 0, syncedStats.linesDeletedBulk || 0),\n                    charactersAdded: Math.max(currentStats.charactersAdded || 0, syncedStats.charactersAdded || 0),\n                    charactersDeleted: Math.max(currentStats.charactersDeleted || 0, syncedStats.charactersDeleted || 0),\n                    keystrokes: Math.max(currentStats.keystrokes || 0, syncedStats.keystrokes || 0),\n                    sessions: this.mergeSessions(currentStats.sessions || [], syncedStats.sessions || []),\n                    lastActive: Math.max(currentStats.lastActive || 0, syncedStats.lastActive || 0)\n                };\n            }\n        }\n        \n        // Recalculate totals\n        this.recalculateTotals();\n    }\n\n    /**\n     * Merge session arrays, avoiding duplicates based on startTime\n     */\n    mergeSessions(currentSessions, syncedSessions) {\n        const sessionMap = new Map();\n        \n        // Add current sessions\n        for (const session of currentSessions) {\n            sessionMap.set(session.startTime, session);\n        }\n        \n        // Add synced sessions (won't duplicate if same startTime)\n        for (const session of syncedSessions) {\n            if (!sessionMap.has(session.startTime)) {\n                sessionMap.set(session.startTime, session);\n            }\n        }\n        \n        // Return sorted by startTime\n        return Array.from(sessionMap.values()).sort((a, b) => a.startTime - b.startTime);\n    }\n\n    /**\n     * Recalculate total values from all projects\n     */\n    recalculateTotals() {\n        this.data.totalTimeAllProjects = 0;\n        this.data.totalKeystrokes = 0;\n        \n        for (const projectId in this.data.projects) {\n            this.data.totalTimeAllProjects += this.data.projects[projectId].totalTime || 0;\n            this.data.totalKeystrokes += this.data.projects[projectId].keystrokes || 0;\n        }\n    }\n\n    /**\n     * Load data from global state\n     */\n    async load() {\n        const stored = this.context.globalState.get(STORAGE_KEY);\n        \n        if (stored) {\n            this.data = {\n                projects: stored.projects || {},\n                totalTimeAllProjects: stored.totalTimeAllProjects || 0,\n                totalKeystrokes: stored.totalKeystrokes || 0\n            };\n            console.log('PUNCHCARD: Loaded existing data from globalState');\n        } else {\n            this.data = createEmptyStorageData();\n            console.log('PUNCHCARD: No existing data, starting fresh');\n        }\n    }\n\n    /**\n     * Save data to global state\n     */\n    async save() {\n        await this.context.globalState.update(STORAGE_KEY, this.data);\n    }\n\n    /**\n     * Get stats for a specific project\n     * @param {string} projectId \n     * @returns {import('./types').ProjectStats}\n     */\n    getProjectStats(projectId) {\n        if (!this.data.projects[projectId]) {\n            this.data.projects[projectId] = createEmptyProjectStats();\n        }\n        return this.data.projects[projectId];\n    }\n\n    /**\n     * Update stats for a project\n     * @param {string} projectId \n     * @param {Partial<import('./types').ProjectStats>} updates \n     */\n    async updateProjectStats(projectId, updates) {\n        const stats = this.getProjectStats(projectId);\n        Object.assign(stats, updates);\n        await this.save();\n    }\n\n    /**\n     * Add time to a project\n     * @param {string} projectId \n     * @param {number} timeMs \n     */\n    async addTime(projectId, timeMs) {\n        const stats = this.getProjectStats(projectId);\n        stats.totalTime += timeMs;\n        stats.lastActive = Date.now();\n        this.data.totalTimeAllProjects += timeMs;\n        await this.save();\n    }\n\n    /**\n     * Add a completed session\n     * @param {string} projectId \n     * @param {import('./types').Session} session \n     */\n    async addSession(projectId, session) {\n        const stats = this.getProjectStats(projectId);\n        stats.sessions.push(session);\n        await this.save();\n    }\n\n    /**\n     * Update the last session end time\n     * @param {string} projectId \n     * @param {number} endTime \n     * @param {number} duration \n     */\n    async updateLastSession(projectId, endTime, duration) {\n        const stats = this.getProjectStats(projectId);\n        if (stats.sessions.length > 0) {\n            const lastSession = stats.sessions[stats.sessions.length - 1];\n            lastSession.endTime = endTime;\n            lastSession.duration = duration;\n            await this.save();\n        }\n    }\n\n    /**\n     * Add metrics to a project\n     * @param {string} projectId \n     * @param {{ linesAdded?: number, linesDeleted?: number, linesAddedBulk?: number, linesDeletedBulk?: number, charactersAdded?: number, charactersDeleted?: number, keystrokes?: number }} metrics \n     */\n    async addMetrics(projectId, metrics) {\n        const stats = this.getProjectStats(projectId);\n        \n        if (metrics.linesAdded) {\n            stats.linesAdded += metrics.linesAdded;\n        }\n        if (metrics.linesDeleted) {\n            stats.linesDeleted += metrics.linesDeleted;\n        }\n        if (metrics.linesAddedBulk) {\n            // Initialize if not present (for backward compatibility)\n            if (typeof stats.linesAddedBulk !== 'number') {\n                stats.linesAddedBulk = 0;\n            }\n            stats.linesAddedBulk += metrics.linesAddedBulk;\n        }\n        if (metrics.linesDeletedBulk) {\n            // Initialize if not present (for backward compatibility)\n            if (typeof stats.linesDeletedBulk !== 'number') {\n                stats.linesDeletedBulk = 0;\n            }\n            stats.linesDeletedBulk += metrics.linesDeletedBulk;\n        }\n        if (metrics.charactersAdded) {\n            stats.charactersAdded += metrics.charactersAdded;\n        }\n        if (metrics.charactersDeleted) {\n            stats.charactersDeleted += metrics.charactersDeleted;\n        }\n        if (metrics.keystrokes) {\n            stats.keystrokes += metrics.keystrokes;\n            this.data.totalKeystrokes += metrics.keystrokes;\n        }\n        \n        stats.lastActive = Date.now();\n        await this.save();\n    }\n\n    /**\n     * Reset a specific stat for a project\n     * @param {string} projectId \n     * @param {string} statName - The stat to reset (keystrokes, linesAdded, linesDeleted, linesAddedBulk, linesDeletedBulk, charactersAdded, charactersDeleted, totalTime, sessions)\n     */\n    async resetProjectStat(projectId, statName) {\n        if (!this.data.projects[projectId]) {\n            return;\n        }\n        \n        const stats = this.data.projects[projectId];\n        \n        switch (statName) {\n            case 'keystrokes':\n                this.data.totalKeystrokes -= stats.keystrokes || 0;\n                stats.keystrokes = 0;\n                break;\n            case 'linesAdded':\n                stats.linesAdded = 0;\n                break;\n            case 'linesDeleted':\n                stats.linesDeleted = 0;\n                break;\n            case 'linesAddedBulk':\n                stats.linesAddedBulk = 0;\n                break;\n            case 'linesDeletedBulk':\n                stats.linesDeletedBulk = 0;\n                break;\n            case 'charactersAdded':\n                stats.charactersAdded = 0;\n                break;\n            case 'charactersDeleted':\n                stats.charactersDeleted = 0;\n                break;\n            case 'totalTime':\n                this.data.totalTimeAllProjects -= stats.totalTime || 0;\n                stats.totalTime = 0;\n                break;\n            case 'sessions':\n                stats.sessions = [];\n                break;\n            case 'allLines':\n                stats.linesAdded = 0;\n                stats.linesDeleted = 0;\n                stats.linesAddedBulk = 0;\n                stats.linesDeletedBulk = 0;\n                break;\n            case 'allChars':\n                stats.charactersAdded = 0;\n                stats.charactersDeleted = 0;\n                break;\n        }\n        \n        await this.save();\n    }\n\n    /**\n     * Reset a specific stat across ALL projects (global reset)\n     * @param {string} statName - The stat to reset globally\n     */\n    async resetGlobalStat(statName) {\n        for (const projectId in this.data.projects) {\n            const stats = this.data.projects[projectId];\n            \n            switch (statName) {\n                case 'keystrokes':\n                    stats.keystrokes = 0;\n                    break;\n                case 'linesAdded':\n                    stats.linesAdded = 0;\n                    break;\n                case 'linesDeleted':\n                    stats.linesDeleted = 0;\n                    break;\n                case 'linesAddedBulk':\n                    stats.linesAddedBulk = 0;\n                    break;\n                case 'linesDeletedBulk':\n                    stats.linesDeletedBulk = 0;\n                    break;\n                case 'charactersAdded':\n                    stats.charactersAdded = 0;\n                    break;\n                case 'charactersDeleted':\n                    stats.charactersDeleted = 0;\n                    break;\n                case 'totalTime':\n                    stats.totalTime = 0;\n                    break;\n                case 'sessions':\n                    stats.sessions = [];\n                    break;\n            }\n        }\n        \n        // Update totals\n        if (statName === 'keystrokes') {\n            this.data.totalKeystrokes = 0;\n        }\n        if (statName === 'totalTime') {\n            this.data.totalTimeAllProjects = 0;\n        }\n        \n        await this.save();\n    }\n\n    /**\n     * Reset stats for a specific project\n     * @param {string} projectId \n     */\n    async resetProject(projectId) {\n        if (this.data.projects[projectId]) {\n            const oldStats = this.data.projects[projectId];\n            this.data.totalTimeAllProjects -= oldStats.totalTime;\n            this.data.totalKeystrokes -= oldStats.keystrokes;\n            delete this.data.projects[projectId];\n            await this.save();\n        }\n    }\n\n    /**\n     * Reset all statistics\n     */\n    async resetAll() {\n        this.data = createEmptyStorageData();\n        await this.save();\n    }\n\n    /**\n     * Import data from an exported JSON file (merges with existing data)\n     * @param {import('./types').StorageData} importedData \n     */\n    async importData(importedData) {\n        if (!importedData || !importedData.projects) {\n            throw new Error('Invalid data format');\n        }\n\n        // Merge imported data with existing data\n        for (const projectId in importedData.projects) {\n            const importedStats = importedData.projects[projectId];\n            \n            if (!this.data.projects[projectId]) {\n                // New project, add it directly\n                this.data.projects[projectId] = importedStats;\n            } else {\n                // Existing project, merge by taking the larger values\n                const existingStats = this.data.projects[projectId];\n                this.data.projects[projectId] = {\n                    totalTime: Math.max(existingStats.totalTime || 0, importedStats.totalTime || 0),\n                    linesAdded: Math.max(existingStats.linesAdded || 0, importedStats.linesAdded || 0),\n                    linesDeleted: Math.max(existingStats.linesDeleted || 0, importedStats.linesDeleted || 0),\n                    linesAddedBulk: Math.max(existingStats.linesAddedBulk || 0, importedStats.linesAddedBulk || 0),\n                    linesDeletedBulk: Math.max(existingStats.linesDeletedBulk || 0, importedStats.linesDeletedBulk || 0),\n                    charactersAdded: Math.max(existingStats.charactersAdded || 0, importedStats.charactersAdded || 0),\n                    charactersDeleted: Math.max(existingStats.charactersDeleted || 0, importedStats.charactersDeleted || 0),\n                    keystrokes: Math.max(existingStats.keystrokes || 0, importedStats.keystrokes || 0),\n                    sessions: [...(existingStats.sessions || []), ...(importedStats.sessions || [])],\n                    lastActive: Math.max(existingStats.lastActive || 0, importedStats.lastActive || 0)\n                };\n            }\n        }\n\n        // Recalculate totals\n        this.data.totalTimeAllProjects = 0;\n        this.data.totalKeystrokes = 0;\n        for (const projectId in this.data.projects) {\n            this.data.totalTimeAllProjects += this.data.projects[projectId].totalTime || 0;\n            this.data.totalKeystrokes += this.data.projects[projectId].keystrokes || 0;\n        }\n\n        await this.save();\n    }\n\n    /**\n     * Get all data for export\n     * @returns {import('./types').StorageData}\n     */\n    getAllData() {\n        return { ...this.data };\n    }\n\n    /**\n     * Get summary statistics\n     */\n    getSummary() {\n        const projectCount = Object.keys(this.data.projects).length;\n        let totalSessions = 0;\n        let totalLinesAdded = 0;\n        let totalLinesDeleted = 0;\n        let totalLinesAddedBulk = 0;\n        let totalLinesDeletedBulk = 0;\n        let totalCharsAdded = 0;\n        let totalCharsDeleted = 0;\n\n        for (const projectId in this.data.projects) {\n            const stats = this.data.projects[projectId];\n            totalSessions += stats.sessions.length;\n            totalLinesAdded += stats.linesAdded || 0;\n            totalLinesDeleted += stats.linesDeleted || 0;\n            totalLinesAddedBulk += stats.linesAddedBulk || 0;\n            totalLinesDeletedBulk += stats.linesDeletedBulk || 0;\n            totalCharsAdded += stats.charactersAdded || 0;\n            totalCharsDeleted += stats.charactersDeleted || 0;\n        }\n\n        return {\n            projectCount,\n            totalTime: this.data.totalTimeAllProjects,\n            totalKeystrokes: this.data.totalKeystrokes,\n            totalSessions,\n            totalLinesAdded,\n            totalLinesDeleted,\n            totalLinesAddedBulk,\n            totalLinesDeletedBulk,\n            totalCharsAdded,\n            totalCharsDeleted\n        };\n    }\n}\n\nmodule.exports = { Storage, STORAGE_KEY };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(497);\n"],"names":["vscode","formatTime","formatTimeHuman","getDailyBreakdown","getWeeklyBreakdown","getMonthlyBreakdown","getTimeInRange","getStartOfDay","module","exports","StatsWebView","constructor","context","storage","this","panel","show","reveal","ViewColumn","One","update","window","createWebviewPanel","enableScripts","retainContextWhenHidden","webview","html","getWebviewContent","onDidReceiveMessage","async","message","command","showWarningMessage","projectId","modal","resetProject","showInformationMessage","statLabel","resetProjectStat","statName","resetGlobalStat","undefined","subscriptions","onDidDispose","data","getAllData","summary","getSummary","projects","allSessions","push","sessions","dailyData","weeklyData","monthlyData","startOfDay","todayTime","totalTime","projectCount","totalSessions","formatNumber","totalKeystrokes","totalLinesAdded","totalLinesDeleted","totalLinesAddedBulk","totalCharsAdded","Object","keys","length","entries","map","stats","escapeHtml","keystrokes","linesAdded","linesDeleted","linesAddedBulk","charactersAdded","lastActive","Date","toLocaleDateString","join","JSON","stringify","name","time","num","toLocaleString","text","div","replace","m","dispose","getProjectId","createEmptyProjectStats","Tracker","isTracking","lastActivity","now","sessionStartTime","currentSessionTime","isAfk","afkThreshold","checkInterval","disposables","onTimeUpdateCallback","onAfkChangeCallback","initialize","loadConfig","workspace","onDidChangeConfiguration","e","affectsConfiguration","getConfiguration","get","start","config","registerActivityListeners","setInterval","tick","addSession","startTime","endTime","duration","stop","clearInterval","disposeActivityListeners","updateLastSession","onDidChangeTextDocument","onActivity","trackDocumentChanges","onDidChangeTextEditorSelection","onDidChangeTextEditorVisibleRanges","onDidChangeActiveTextEditor","disposable","wasAfk","event","contentChanges","charsAdded","charsDeleted","linesDeletedBulk","change","textLength","deletedLength","rangeLength","newLines","match","deletedLines","range","end","line","addMetrics","charactersDeleted","addTime","onTimeUpdate","callback","onAfkChange","getCurrentSessionTime","getTodayTime","getProjectStats","setHours","startTimestamp","getTime","session","isCurrentlyTracking","createEmptyStorageData","totalTimeAllProjects","require","isSessionInRange","startRange","endRange","total","overlapStart","Math","max","min","ms","totalSeconds","floor","hours","minutes","seconds","toString","padStart","parts","workspaceFolders","uri","fsPath","getFullYear","getMonth","getDate","getStartOfWeek","day","getDay","diff","getStartOfMonth","days","result","i","date","endOfDay","weekday","month","weeks","currentDay","weekStart","weekEnd","week","months","monthStart","monthEnd","year","Storage","StatusBar","tracker","statusBar","activate","console","log","showStatsCommand","commands","registerCommand","resetProjectCommand","resetAllCommand","resetAll","exportDataCommand","jsonContent","showSaveDialog","defaultUri","Uri","file","filters","fs","writeFile","Buffer","from","importDataCommand","showOpenDialog","canSelectFiles","canSelectFolders","canSelectMany","fileContent","readFile","importedData","parse","importData","showErrorMessage","error","checkSyncCommand","deactivate","statusBarItem","createStatusBarItem","StatusBarAlignment","Left","tooltip","updateInterval","updateAfkStatus","sessionTime","sessionStr","todayStr","icon","backgroundColor","ThemeColor","split","STORAGE_KEY","SYNC_KEYS","initialized","syncCheckTimeout","globalState","setKeysForSync","load","scheduleSyncCheck","forEach","delay","setTimeout","checkForSyncedData","stored","storedProjectCount","currentProjectCount","storedTotalTime","currentTotalTime","mergeWithSyncedData","save","syncedData","syncedStats","currentStats","mergeSessions","recalculateTotals","currentSessions","syncedSessions","sessionMap","Map","set","has","Array","values","sort","a","b","updateProjectStats","updates","assign","timeMs","lastSession","metrics","oldStats","Error","importedStats","existingStats","totalLinesDeletedBulk","totalCharsDeleted","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"ignoreList":[],"sourceRoot":""}