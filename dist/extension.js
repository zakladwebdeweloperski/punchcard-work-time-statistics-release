(()=>{var t={103(t,e,s){const n=s(398),{formatTime:a,formatTimeHuman:i,getDailyBreakdown:o,getWeeklyBreakdown:r,getMonthlyBreakdown:c,getTimeInRange:d,getStartOfDay:l}=s(413);t.exports={StatsWebView:class{constructor(t,e){this.context=t,this.storage=e,this.panel=null}show(){if(this.panel)return this.panel.reveal(n.ViewColumn.One),void this.update();this.panel=n.window.createWebviewPanel("workTimerStats","PUNCHCARD - Work Time Statistics",n.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0}),this.panel.webview.html=this.getWebviewContent(),this.panel.webview.onDidReceiveMessage(async t=>{switch(t.command){case"resetProject":"Yes, Reset"===await n.window.showWarningMessage(`Are you sure you want to reset statistics for "${t.projectId}"?`,{modal:!0},"Yes, Reset")&&(await this.storage.resetProject(t.projectId),this.update(),n.window.showInformationMessage(`Statistics for "${t.projectId}" have been reset.`));break;case"refresh":this.update()}},void 0,this.context.subscriptions),this.panel.onDidDispose(()=>{this.panel=null},null,this.context.subscriptions)}update(){this.panel&&(this.panel.webview.html=this.getWebviewContent())}getWebviewContent(){const t=this.storage.getAllData(),e=this.storage.getSummary(),s=t.projects,n=[];for(const t in s)n.push(...s[t].sessions);const i=o(n,7),h=r(n,4),p=c(n,6),u=l(),m=d(n,u,u+864e5);return`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>PUNCHCARD - Work Time Statistics</title>\n    <script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>\n    <style>\n        :root {\n            --bg-color: var(--vscode-editor-background);\n            --text-color: var(--vscode-editor-foreground);\n            --border-color: var(--vscode-panel-border);\n            --card-bg: var(--vscode-editorWidget-background);\n            --accent-color: var(--vscode-button-background);\n            --accent-hover: var(--vscode-button-hoverBackground);\n            --danger-color: var(--vscode-errorForeground);\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: var(--vscode-font-family);\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            padding: 20px;\n            line-height: 1.6;\n        }\n\n        h1, h2, h3 {\n            margin-bottom: 15px;\n            font-weight: 600;\n        }\n\n        h1 {\n            font-size: 24px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        h1::before {\n            content: "‚è±Ô∏è";\n        }\n\n        .header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 30px;\n            padding-bottom: 15px;\n            border-bottom: 1px solid var(--border-color);\n        }\n\n        .refresh-btn {\n            background-color: var(--accent-color);\n            color: var(--vscode-button-foreground);\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n        }\n\n        .refresh-btn:hover {\n            background-color: var(--accent-hover);\n        }\n\n        .summary-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 15px;\n            margin-bottom: 30px;\n        }\n\n        .summary-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            text-align: center;\n        }\n\n        .summary-card .value {\n            font-size: 28px;\n            font-weight: bold;\n            color: var(--accent-color);\n            margin-bottom: 5px;\n        }\n\n        .summary-card .label {\n            font-size: 12px;\n            opacity: 0.8;\n            text-transform: uppercase;\n        }\n\n        .charts-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .chart-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n        }\n\n        .chart-card h3 {\n            margin-bottom: 20px;\n        }\n\n        .chart-container {\n            position: relative;\n            height: 250px;\n        }\n\n        .projects-section {\n            margin-top: 30px;\n        }\n\n        .project-card {\n            background-color: var(--card-bg);\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            padding: 20px;\n            margin-bottom: 15px;\n        }\n\n        .project-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 15px;\n        }\n\n        .project-name {\n            font-size: 18px;\n            font-weight: 600;\n        }\n\n        .reset-btn {\n            background-color: transparent;\n            color: var(--danger-color);\n            border: 1px solid var(--danger-color);\n            padding: 5px 10px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 12px;\n        }\n\n        .reset-btn:hover {\n            background-color: var(--danger-color);\n            color: white;\n        }\n\n        .project-stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 10px;\n        }\n\n        .stat {\n            display: flex;\n            flex-direction: column;\n        }\n\n        .stat .stat-value {\n            font-size: 20px;\n            font-weight: bold;\n        }\n\n        .stat .stat-label {\n            font-size: 11px;\n            opacity: 0.7;\n            text-transform: uppercase;\n        }\n\n        .no-data {\n            text-align: center;\n            padding: 40px;\n            opacity: 0.6;\n        }\n\n        @media (max-width: 600px) {\n            .charts-container {\n                grid-template-columns: 1fr;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class="header">\n        <h1>PUNCHCARD - Work Time Statistics</h1>\n        <button class="refresh-btn" onclick="refresh()">üîÑ Refresh</button>\n    </div>\n\n    <div class="summary-grid">\n        <div class="summary-card">\n            <div class="value">${a(e.totalTime)}</div>\n            <div class="label">Total Time</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">${a(m)}</div>\n            <div class="label">Today</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">${e.projectCount}</div>\n            <div class="label">Projects</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">${e.totalSessions}</div>\n            <div class="label">Sessions</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">${this.formatNumber(e.totalKeystrokes)}</div>\n            <div class="label">Keystrokes</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">+${this.formatNumber(e.totalLinesAdded)}</div>\n            <div class="label">Lines Added</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">-${this.formatNumber(e.totalLinesDeleted)}</div>\n            <div class="label">Lines Deleted</div>\n        </div>\n        <div class="summary-card">\n            <div class="value">${this.formatNumber(e.totalCharsAdded)}</div>\n            <div class="label">Chars Added</div>\n        </div>\n    </div>\n\n    <div class="charts-container">\n        <div class="chart-card">\n            <h3>üìÖ Daily Activity (Last 7 Days)</h3>\n            <div class="chart-container">\n                <canvas id="dailyChart"></canvas>\n            </div>\n        </div>\n        <div class="chart-card">\n            <h3>üìä Weekly Activity (Last 4 Weeks)</h3>\n            <div class="chart-container">\n                <canvas id="weeklyChart"></canvas>\n            </div>\n        </div>\n        <div class="chart-card">\n            <h3>üìà Monthly Activity (Last 6 Months)</h3>\n            <div class="chart-container">\n                <canvas id="monthlyChart"></canvas>\n            </div>\n        </div>\n        <div class="chart-card">\n            <h3>ü•ß Time by Project</h3>\n            <div class="chart-container">\n                <canvas id="projectsChart"></canvas>\n            </div>\n        </div>\n    </div>\n\n    <div class="projects-section">\n        <h2>üìÅ Projects</h2>\n        ${0===Object.keys(s).length?'<div class="no-data">No projects tracked yet. Start coding to see your statistics!</div>':Object.entries(s).map(([t,e])=>`\n                <div class="project-card">\n                    <div class="project-header">\n                        <span class="project-name">${this.escapeHtml(t)}</span>\n                        <button class="reset-btn" onclick="resetProject('${this.escapeHtml(t)}')">üóëÔ∏è Reset</button>\n                    </div>\n                    <div class="project-stats">\n                        <div class="stat">\n                            <span class="stat-value">${a(e.totalTime)}</span>\n                            <span class="stat-label">Total Time</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">${e.sessions.length}</span>\n                            <span class="stat-label">Sessions</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">${this.formatNumber(e.keystrokes)}</span>\n                            <span class="stat-label">Keystrokes</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">+${this.formatNumber(e.linesAdded)}</span>\n                            <span class="stat-label">Lines Added</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">-${this.formatNumber(e.linesDeleted)}</span>\n                            <span class="stat-label">Lines Deleted</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">${this.formatNumber(e.charactersAdded)}</span>\n                            <span class="stat-label">Chars Added</span>\n                        </div>\n                        <div class="stat">\n                            <span class="stat-value">${e.lastActive?new Date(e.lastActive).toLocaleDateString():"Never"}</span>\n                            <span class="stat-label">Last Active</span>\n                        </div>\n                    </div>\n                </div>\n            `).join("")}\n    </div>\n\n    <script>\n        const vscode = acquireVsCodeApi();\n\n        function refresh() {\n            vscode.postMessage({ command: 'refresh' });\n        }\n\n        function resetProject(projectId) {\n            vscode.postMessage({ command: 'resetProject', projectId: projectId });\n        }\n\n        // Chart.js configuration\n        Chart.defaults.color = getComputedStyle(document.body).getPropertyValue('--vscode-editor-foreground') || '#ffffff';\n        Chart.defaults.borderColor = getComputedStyle(document.body).getPropertyValue('--vscode-panel-border') || '#333333';\n\n        const chartColors = [\n            '#4FC3F7', '#81C784', '#FFB74D', '#F06292', '#BA68C8',\n            '#4DD0E1', '#AED581', '#FF8A65', '#9575CD', '#7986CB'\n        ];\n\n        // Daily Chart\n        const dailyData = ${JSON.stringify(i)};\n        new Chart(document.getElementById('dailyChart'), {\n            type: 'bar',\n            data: {\n                labels: dailyData.map(d => d.date),\n                datasets: [{\n                    label: 'Hours',\n                    data: dailyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#4FC3F7',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Weekly Chart\n        const weeklyData = ${JSON.stringify(h)};\n        new Chart(document.getElementById('weeklyChart'), {\n            type: 'bar',\n            data: {\n                labels: weeklyData.map(d => d.week),\n                datasets: [{\n                    label: 'Hours',\n                    data: weeklyData.map(d => (d.time / 3600000).toFixed(2)),\n                    backgroundColor: '#81C784',\n                    borderRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Monthly Chart\n        const monthlyData = ${JSON.stringify(p)};\n        new Chart(document.getElementById('monthlyChart'), {\n            type: 'line',\n            data: {\n                labels: monthlyData.map(d => d.month),\n                datasets: [{\n                    label: 'Hours',\n                    data: monthlyData.map(d => (d.time / 3600000).toFixed(2)),\n                    borderColor: '#FFB74D',\n                    backgroundColor: 'rgba(255, 183, 77, 0.2)',\n                    fill: true,\n                    tension: 0.3\n                }]\n            },\n            options: {\n                responsive: true,\n                maintainAspectRatio: false,\n                plugins: {\n                    legend: { display: false }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true,\n                        title: { display: true, text: 'Hours' }\n                    }\n                }\n            }\n        });\n\n        // Projects Pie Chart\n        const projectsData = ${JSON.stringify(Object.entries(s).map(([t,e])=>({name:t,time:e.totalTime})))};\n        if (projectsData.length > 0) {\n            new Chart(document.getElementById('projectsChart'), {\n                type: 'doughnut',\n                data: {\n                    labels: projectsData.map(d => d.name),\n                    datasets: [{\n                        data: projectsData.map(d => (d.time / 3600000).toFixed(2)),\n                        backgroundColor: chartColors.slice(0, projectsData.length)\n                    }]\n                },\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'right',\n                            labels: {\n                                boxWidth: 12,\n                                padding: 10\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    <\/script>\n</body>\n</html>`}formatNumber(t){return t.toLocaleString()}escapeHtml(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,t=>e[t])}dispose(){this.panel&&(this.panel.dispose(),this.panel=null)}}}},140(t,e,s){const n=s(398),{getProjectId:a}=s(413),{createEmptyProjectStats:i}=s(305);t.exports={Tracker:class{constructor(t){this.storage=t,this.projectId=a(),this.isTracking=!1,this.lastActivity=Date.now(),this.sessionStartTime=0,this.currentSessionTime=0,this.isAfk=!1,this.afkThreshold=3e5,this.checkInterval=null,this.disposables=[],this.onTimeUpdateCallback=null,this.onAfkChangeCallback=null}initialize(){this.loadConfig(),this.disposables.push(n.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("workTimer")&&this.loadConfig()})),n.workspace.getConfiguration("workTimer").get("trackOnStartup",!0)&&this.start()}loadConfig(){const t=n.workspace.getConfiguration("workTimer");this.afkThreshold=t.get("afkThreshold",3e5)}start(){this.isTracking||(this.isTracking=!0,this.lastActivity=Date.now(),this.sessionStartTime=Date.now(),this.currentSessionTime=0,this.isAfk=!1,this.registerActivityListeners(),this.checkInterval=setInterval(()=>this.tick(),1e3),this.storage.addSession(this.projectId,{startTime:this.sessionStartTime,endTime:this.sessionStartTime,duration:0}))}stop(){if(this.isTracking&&(this.isTracking=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.disposeActivityListeners(),this.sessionStartTime>0)){const t=Date.now();this.storage.updateLastSession(this.projectId,t,this.currentSessionTime)}}registerActivityListeners(){this.disposables.push(n.workspace.onDidChangeTextDocument(t=>{this.onActivity(),this.trackDocumentChanges(t)})),this.disposables.push(n.window.onDidChangeTextEditorSelection(()=>{this.onActivity()})),this.disposables.push(n.window.onDidChangeTextEditorVisibleRanges(()=>{this.onActivity()})),this.disposables.push(n.window.onDidChangeActiveTextEditor(()=>{this.onActivity(),this.projectId=a()}))}disposeActivityListeners(){for(const t of this.disposables)t.dispose();this.disposables=[]}onActivity(){const t=this.isAfk;this.lastActivity=Date.now(),this.isAfk=!1,t&&this.onAfkChangeCallback&&(this.onAfkChangeCallback(!1),this.sessionStartTime=Date.now(),this.currentSessionTime=0,this.storage.addSession(this.projectId,{startTime:this.sessionStartTime,endTime:this.sessionStartTime,duration:0}))}trackDocumentChanges(t){if(!t.contentChanges.length)return;let e=0,s=0,n=0,a=0,i=0;for(const o of t.contentChanges)n+=o.text.length,a+=o.rangeLength,e+=(o.text.match(/\n/g)||[]).length,s+=o.range.end.line-o.range.start.line,i+=Math.max(1,o.text.length);this.storage.addMetrics(this.projectId,{linesAdded:e,linesDeleted:s,charactersAdded:n,charactersDeleted:a,keystrokes:i})}tick(){if(!this.isTracking)return;const t=Date.now();t-this.lastActivity>=this.afkThreshold?this.isAfk||(this.isAfk=!0,this.storage.updateLastSession(this.projectId,this.lastActivity,this.currentSessionTime),this.onAfkChangeCallback&&this.onAfkChangeCallback(!0)):this.isAfk||(this.currentSessionTime+=1e3,this.storage.addTime(this.projectId,1e3),this.storage.updateLastSession(this.projectId,t,this.currentSessionTime),this.onTimeUpdateCallback&&this.onTimeUpdateCallback(this.currentSessionTime))}onTimeUpdate(t){this.onTimeUpdateCallback=t}onAfkChange(t){this.onAfkChangeCallback=t}getCurrentSessionTime(){return this.currentSessionTime}getTodayTime(){const t=this.storage.getProjectStats(this.projectId),e=new Date;e.setHours(0,0,0,0);const s=e.getTime();Date.now();let n=0;for(const e of t.sessions)e.startTime>=s?n+=e.duration:e.endTime>s&&(n+=e.endTime-s);return n}isCurrentlyTracking(){return this.isTracking&&!this.isAfk}getProjectId(){return this.projectId}dispose(){this.stop(),this.disposeActivityListeners()}}}},305(t){t.exports={createEmptyProjectStats:function(){return{totalTime:0,linesAdded:0,linesDeleted:0,charactersAdded:0,charactersDeleted:0,keystrokes:0,sessions:[],lastActive:0}},createEmptyStorageData:function(){return{projects:{},totalTimeAllProjects:0,totalKeystrokes:0}}}},398(t){"use strict";t.exports=require("vscode")},413(t,e,s){const n=s(398);function a(t,e,s){return t.startTime<s&&t.endTime>e}function i(t,e,s){let n=0;for(const i of t)if(a(i,e,s)){const t=Math.max(i.startTime,e);n+=Math.min(i.endTime,s)-t}return n}t.exports={formatTime:function(t){t<0&&(t=0);const e=Math.floor(t/1e3),s=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return`${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},formatTimeHuman:function(t){t<0&&(t=0);const e=Math.floor(t/1e3),s=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60,i=[];return s>0&&i.push(`${s}h`),n>0&&i.push(`${n}m`),(a>0||0===i.length)&&i.push(`${a}s`),i.join(" ")},getProjectId:function(){const t=n.workspace.workspaceFolders;if(!t||0===t.length)return"unknown-project";return n.workspace.name||t[0].uri.fsPath},getStartOfDay:function(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},getStartOfWeek:function(){const t=new Date,e=t.getDay(),s=t.getDate()-e+(0===e?-6:1);return new Date(t.getFullYear(),t.getMonth(),s).getTime()},getStartOfMonth:function(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),1).getTime()},isSessionInRange:a,getTimeInRange:i,getDailyBreakdown:function(t,e=7){const s=[],n=new Date;for(let a=e-1;a>=0;a--){const e=new Date(n.getFullYear(),n.getMonth(),n.getDate()-a),o=e.getTime(),r=o+864e5;s.push({date:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:i(t,o,r)})}return s},getWeeklyBreakdown:function(t,e=4){const s=[],n=new Date,a=n.getDay(),o=n.getDate()-a+(0===a?-6:1);for(let a=e-1;a>=0;a--){const e=new Date(n.getFullYear(),n.getMonth(),o-7*a),r=new Date(e.getTime()+6048e5);s.push({week:`Week of ${e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,time:i(t,e.getTime(),r.getTime())})}return s},getMonthlyBreakdown:function(t,e=6){const s=[],n=new Date;for(let a=e-1;a>=0;a--){const e=new Date(n.getFullYear(),n.getMonth()-a,1),o=new Date(n.getFullYear(),n.getMonth()-a+1,1);s.push({month:e.toLocaleDateString("en-US",{month:"long",year:"numeric"}),time:i(t,e.getTime(),o.getTime())})}return s}}},497(t,e,s){const n=s(398),{Storage:a}=s(829),{Tracker:i}=s(140),{StatusBar:o}=s(523),{StatsWebView:r}=s(103);let c,d,l,h;t.exports={activate:async function(t){console.log("PUNCHCARD - Work Time Statistics is now active!"),c=new a(t),await c.initialize(),d=new i(c),d.initialize(),l=new o(d),l.initialize(),h=new r(t,c);const e=n.commands.registerCommand("workTimer.showStats",()=>{h.show()}),s=n.commands.registerCommand("workTimer.resetProject",async()=>{const t=d.getProjectId();"Yes, Reset"===await n.window.showWarningMessage(`Are you sure you want to reset statistics for "${t}"?`,{modal:!0},"Yes, Reset")&&(await c.resetProject(t),n.window.showInformationMessage(`Statistics for "${t}" have been reset.`))}),p=n.commands.registerCommand("workTimer.resetAll",async()=>{"Yes, Reset All"===await n.window.showWarningMessage("Are you sure you want to reset ALL statistics? This cannot be undone.",{modal:!0},"Yes, Reset All")&&(await c.resetAll(),n.window.showInformationMessage("All statistics have been reset."))}),u=n.commands.registerCommand("workTimer.exportData",async()=>{const t=c.getAllData(),e=JSON.stringify(t,null,2),s=await n.window.showSaveDialog({defaultUri:n.Uri.file("punchcard-stats.json"),filters:{"JSON Files":["json"]}});s&&(await n.workspace.fs.writeFile(s,Buffer.from(e,"utf8")),n.window.showInformationMessage(`Statistics exported to ${s.fsPath}`))});t.subscriptions.push(e,s,p,u),t.subscriptions.push({dispose:()=>{d.dispose(),l.dispose(),h.dispose()}})},deactivate:function(){d&&d.dispose(),l&&l.dispose(),h&&h.dispose()}}},523(t,e,s){const n=s(398),{formatTime:a}=s(413);t.exports={StatusBar:class{constructor(t){this.tracker=t,this.statusBarItem=n.window.createStatusBarItem(n.StatusBarAlignment.Left,100),this.statusBarItem.command="workTimer.showStats",this.statusBarItem.tooltip="Click to view work time statistics",this.updateInterval=null}initialize(){this.statusBarItem.show(),this.update(),this.updateInterval=setInterval(()=>this.update(),1e3),this.tracker.onTimeUpdate(()=>this.update()),this.tracker.onAfkChange(t=>this.updateAfkStatus(t))}update(){const t=this.tracker.getCurrentSessionTime(),e=this.tracker.getTodayTime(),s=this.tracker.isCurrentlyTracking(),i=a(t),o=a(e),r=s?"$(clock)":"$(debug-pause)";this.statusBarItem.text=`${r} ${i} | Today: ${o}`,this.statusBarItem.backgroundColor=s?void 0:new n.ThemeColor("statusBarItem.warningBackground")}updateAfkStatus(t){t?(this.statusBarItem.text=`$(debug-pause) AFK - ${this.statusBarItem.text.split(" | ")[1]||""}`,this.statusBarItem.backgroundColor=new n.ThemeColor("statusBarItem.warningBackground")):(this.statusBarItem.backgroundColor=void 0,this.update())}dispose(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.statusBarItem.dispose()}}}},829(t,e,s){const{createEmptyProjectStats:n,createEmptyStorageData:a}=s(305),i="punchcard-work-stats",o=[i];t.exports={Storage:class{constructor(t){this.context=t,this.data=a(),this.initialized=!1}async initialize(){this.context.globalState.setKeysForSync(o),await this.load(),this.initialized=!0}async load(){const t=this.context.globalState.get(i);this.data=t?{projects:t.projects||{},totalTimeAllProjects:t.totalTimeAllProjects||0,totalKeystrokes:t.totalKeystrokes||0}:a()}async save(){await this.context.globalState.update(i,this.data)}getProjectStats(t){return this.data.projects[t]||(this.data.projects[t]=n()),this.data.projects[t]}async updateProjectStats(t,e){const s=this.getProjectStats(t);Object.assign(s,e),await this.save()}async addTime(t,e){const s=this.getProjectStats(t);s.totalTime+=e,s.lastActive=Date.now(),this.data.totalTimeAllProjects+=e,await this.save()}async addSession(t,e){this.getProjectStats(t).sessions.push(e),await this.save()}async updateLastSession(t,e,s){const n=this.getProjectStats(t);if(n.sessions.length>0){const t=n.sessions[n.sessions.length-1];t.endTime=e,t.duration=s,await this.save()}}async addMetrics(t,e){const s=this.getProjectStats(t);e.linesAdded&&(s.linesAdded+=e.linesAdded),e.linesDeleted&&(s.linesDeleted+=e.linesDeleted),e.charactersAdded&&(s.charactersAdded+=e.charactersAdded),e.charactersDeleted&&(s.charactersDeleted+=e.charactersDeleted),e.keystrokes&&(s.keystrokes+=e.keystrokes,this.data.totalKeystrokes+=e.keystrokes),s.lastActive=Date.now(),await this.save()}async resetProject(t){if(this.data.projects[t]){const e=this.data.projects[t];this.data.totalTimeAllProjects-=e.totalTime,this.data.totalKeystrokes-=e.keystrokes,delete this.data.projects[t],await this.save()}}async resetAll(){this.data=a(),await this.save()}getAllData(){return{...this.data}}getSummary(){const t=Object.keys(this.data.projects).length;let e=0,s=0,n=0,a=0,i=0;for(const t in this.data.projects){const o=this.data.projects[t];e+=o.sessions.length,s+=o.linesAdded,n+=o.linesDeleted,a+=o.charactersAdded,i+=o.charactersDeleted}return{projectCount:t,totalTime:this.data.totalTimeAllProjects,totalKeystrokes:this.data.totalKeystrokes,totalSessions:e,totalLinesAdded:s,totalLinesDeleted:n,totalCharsAdded:a,totalCharsDeleted:i}}},STORAGE_KEY:i}}},e={},s=function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}(497);module.exports=s})();